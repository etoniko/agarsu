<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Agar.su ‚Äî –ª—É—á—à–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ agar.io. –ò–≥—Ä–∞–π—Ç–µ –æ–Ω–ª–∞–π–Ω –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å: –ø–æ–≥–ª–æ—â–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏, —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ —Å—Ç–∞–Ω—å—Ç–µ –ª–∏–¥–µ—Ä–æ–º —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –∫–ª–æ–Ω–æ–≤ agar –∏ agario.">
    <meta name="author" content="Agar.su Team">
    <meta name="robots" content="index">
    <!-- Open Graph –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π -->
    <meta property="og:title" content="Agar.su - –ó–∞–≤–æ–µ–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!">
    <meta property="og:description" content="absorb cells, compete with other players, and become the leader among all agar and agario clones.">
    <meta property="og:image" content="assets/photo/ogimage.jpeg">
    <meta property="og:url" content="https://agar.su">
    <meta property="og:type" content="website">
    <title>Agar.su</title>
    <!-- Favicon –∏ –∏–∫–æ–Ω–∫–∏ –¥–ª—è Apple —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" href="/icon.svg" type="image/x-icon">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://agar.su">
    <!-- –®—Ä–∏—Ñ—Ç—ã –∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=new_releases" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://api.agar.su/assets/style.css" rel="stylesheet">
    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="/assets/scripts/jquery.js?0.0.2"></script>
    <script src="/assets/scripts/log.js?0.0.2"></script>
    <script src="/assets/scripts/vector.js?0.0.2"></script>
    <script src="https://api.agar.su/assets/scripts/main_out2.js"></script>
	<script src="https://api.agar.su/assets/scripts/shop.js" defer></script>
	<script src="/assets/scripts/all.js?0.0.35" defer></script>
	<script src="/assets/scripts/pass.js?0.0.2" defer></script>
	<script src="/assets/scripts/skins.js?0.0.2" defer></script>
	<script src="/assets/scripts/rating.js?0.0.4" defer></script>
</head>
<body>
  <div id="overlays" class="overlays">
    <div class="social"><a href="https://t.me/agarsu" target="_blank" class="tg"><i style="background: radial-gradient(white 9px, #1e90ff00 50%);border-radius: 50%;" class="fab fa-telegram"></i></a><a href="https://vk.com/club233723574" target="_blank" class="soc"><i class="fab fa-vk"></i></a><a href="#" class="soc"><i style="cursor: not-allowed;" class="fab fa-discord"></i></a></div>
    <div class="center">
      <div class="sidebar">
        <div class="menu-item" onclick="showContent('shop')"><i class="fas fa-shop"></i><span class="label">–ú–∞–≥–∞–∑–∏–Ω</span></div>
        <div class="menu-item" onclick="showContent('skinslist')"><i class="fas fa-image"></i><span class="label">–°–∫–∏–Ω—ã</span></div>
        <div class="menu-item active" onclick="showContent('home')"><i class="fas fa-home"></i><span class="label">–ì–ª–∞–≤–Ω–∞—è</span></div>
        <div class="menu-item" onclick="showContent('rating')"><i class="fas fa-star"></i><span class="label">–†–µ–π—Ç–∏–Ω–≥</span></div>
        <div class="menu-item" onclick="showContent('store')"><i class="fas fa-user"></i><span class="label">–í–æ–π—Ç–∏</span></div>
      </div>
      <div class="main-content">


<div id="shop" class="content">
	<div class="top-info"><div><span>–°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—á–∫–∏</span></div></div>
<div class="shop-container">
  <div class="avatar-section">
    <label id="previewContainer" for="fileInput">
      <canvas id="previewCanvas" width="512" height="512"></canvas>
      <img id="previewGif" alt="GIF preview">
    </label>
    <input type="file" id="fileInput" accept=".png,.jpg,.gif" autocomplete="off">
    <div id="fileError" class="error"></div>

    <form id="paymentForm" autocomplete="off">
      <div class="radio-group">
        <label><input type="radio" name="serviceType" value="personal" id="personal" checked autocomplete="off"><span>–î–ª—è —Å–µ–±—è</span></label>
        <label><input type="radio" name="serviceType" value="clan" id="clan" autocomplete="off"><span>–î–ª—è –∫–ª–∞–Ω–∞</span></label>
      </div>

      <div class="input-group">
        <div id="nicknameWrapper">
          <input type="text" id="nickname" placeholder="–ü—Ä–∏–¥—É–º–∞–π —Å–µ–±–µ –Ω–∏–∫" required maxlength="15" title="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫" autocomplete="off">
          <span id="charCount">0/15</span>
        </div>
        <div id="nicknameError" class="error"></div>
      </div>

      <div class="input-group">
        <div class="password-wrapper">
          <input type="password" id="password" placeholder="–ü—Ä–∏–¥—É–º–∞–π —Å–µ–±–µ –ø–∞—Ä–æ–ª—å" maxlength="5" autocomplete="off">
          <i id="togglePassword" class="fa-solid fa-eye eye"></i>
        </div>
        <div id="passwordError" class="error"></div>
      </div>

      <div id="formError" class="error"></div>
      <button type="submit" id="buyButton" disabled>–ö–£–ü–ò–¢–¨ –ó–ê 0 –†–£–ë–õ–ï–ô</button>
    </form>
  </div>

  <div class="oplata">
    <div id="calculator" style="display:none">
      <h3>–†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h3>
      <p id="clanMultiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplierText">1x (–¥–ª—è —Å–µ–±—è)</span></p>
      <p id="passwordCost">–ü–∞—Ä–æ–ª—å: 0 ‚ÇΩ</p>
      <p id="skinCost">–°–∫–∏–Ω: 0 ‚ÇΩ</p>
      <div id="totalAmount">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
    </div>
  </div>
</div>
        </div>

		  
        <div id="settings" class="content">
          <div class="top-info">
            <div><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
          </div>
          <div class="checkbox-container">
<label>
  <input type="checkbox" class="save" data-box-id="1" onchange="setSkins($(this).is(':checked'));">–í–∏–¥–µ—Ç—å –°–∫–∏–Ω—ã
</label>
<label>
  <input type="checkbox" class="save" data-box-id="2" onchange="setNames($(this).is(':checked'));">–í–∏–¥–µ—Ç—å –ò–º–µ–Ω–∞
</label>
<label>
  <input type="checkbox" class="save" data-box-id="3" onchange="setColors($(this).is(':checked'));">–¶–≤–µ—Ç–∞
</label>
<label>
  <input type="checkbox" class="save" data-box-id="4" onchange="setMouseClicks($(this).is(':checked'));">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–∫–∞ –º—ã—à–∫–∏
</label>
<label>
  <input type="checkbox" class="save" data-box-id="5" onchange="setShowMass($(this).is(':checked'));" checked>–ü–æ–∫–∞–∑–∞—Ç—å –ú–∞—Å—Å—É
</label>
<label>
  <input type="checkbox" class="save" data-box-id="6" onchange="setSmooth($(this).is(':checked'));">–ü—Ä–æ—Å—Ç–æ–π –†–µ–Ω–¥–µ—Ä
</label>
<label>
  <input type="checkbox" class="save" data-box-id="7" onchange="setNoBorder($(this).is(':checked'));">–û—Ç–∫–ª—é—á–∏—Ç—å –æ–±–≤–æ–¥–∫—É
</label>
<label>
  <input type="checkbox" class="save" data-box-id="8" onchange="setChatHide($(this).is(':checked'));">–û—Ç–∫–ª—é—á–∏—Ç—å —á–∞—Ç
</label>
<label>
  <input type="checkbox" class="save" data-box-id="9" onchange="setGlow($(this).is(':checked'));" checked>–≠—Ñ—Ñ–µ–∫—Ç –õ–∏–º–∏—Ç–∞
</label>




			  
  <div id="theme-selector">
    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É:</label>
    <select id="theme-select">
      <option value="gradient">–ì—Ä–∞–¥–∏–µ–Ω—Ç</option>
      <option value="white">–ë–µ–ª–∞—è</option>
      <option value="black">–ß–µ—Ä–Ω–∞—è</option>
    </select>
  </div>

  <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ -->
  <div id="gradient-settings">
  <div class="color-picker">
    <span>–¶–≤–µ—Ç —Ü–µ–Ω—Ç—Ä–∞:</span>
    <input type="color" id="gradient-center" value="#132745">
  </div>
  <div class="color-picker">
    <span>–¶–≤–µ—Ç –∫—Ä–∞—ë–≤:</span>
    <input type="color" id="gradient-edge" value="#000000">
  </div>
</div>
</div>
			  
          </div>
        <div id="skinslist" class="content">
          <div style="display: flex;flex-direction: column;justify-content: space-around;" class="top-info">
            <div class="gall"><span>–°–∫–∏–Ω—ã</span></div>
            <ul class="gallery">
              <li style="background-image: url('https://i.imgur.com/tq33YWv.png');" onclick="selectSkin('–ú—É—Ö–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/dzQIxk0.png');" onclick="selectSkin('–ü–∞—É–∫');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/fpDpEl9.png');" onclick="selectSkin('–ö–∞–∫—Ç—É—Å');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/69ChrNV.png');" onclick="selectSkin('–ó–∞—è');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/qRq5CIg.png');" onclick="selectSkin('–û—Å–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/TPgKn6V.png');" onclick="selectSkin('–Ø—â–µ—Ä–∏—Ü–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/QPCVdvQ.png');" onclick="selectSkin('–õ–∏—Å–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/YbmC0tv.png');" onclick="selectSkin('–í–æ–ª–∫');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/hmVJPmb.png');" onclick="selectSkin('–ú–∞–º–æ–Ω—Ç');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/RKtDpin.png');" onclick="selectSkin('–î–∏–Ω–æ–∑–∞–≤—Ä');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/3hxdGAq.png');" onclick="selectSkin('–ú–æ—Ä–æ–∂–µ–Ω–æ–µ');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/zdcHEFS.png');" onclick="selectSkin('–†–∞–∫–µ—Ç–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/roUvNMV.png');" onclick="selectSkin('–ú–æ–≥—É—á–∞—è');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/57BzylL.png');" onclick="selectSkin('–§–∞—É–Ω');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/rPlbHK7.png');" onclick="selectSkin('–ë–∞–±—É—à–∫–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/ruAUEpb.png');" onclick="selectSkin('–ì–æ—Ä–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/ipqCMMf.png');" onclick="selectSkin('–ö–æ—Å–º–æ–Ω–∞–≤—Ç');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/wRiL4Jx.png');" onclick="selectSkin('–ü–µ—Ä–≤–æ–±—ã—Ç–Ω—ã–π');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/GTxoIhj.png');" onclick="selectSkin('–í–ª—é–±–ª—ë–Ω–Ω—ã–π');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/EcW6zbE.png');" onclick="selectSkin('–í–ª—é–±–ª—ë–Ω–Ω–∞—è');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/UINxrlJ.png');" onclick="selectSkin('–°–∞–º–±–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/lxAXnAi.png');" onclick="selectSkin('–°–Ω–µ–≥–æ–≤–∏–∫');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/7GWqCnY.png');" onclick="selectSkin('–ü–∞–Ω–¥–∞');showContent('home')"></li>
              <li>
                <a style="display: block;width: 100%;height: 100%;background-image: url('assets/photo/skinstg.png');background-size: cover;" onclick="showContent('shop');"></a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Home Content -->
        <div id="home" class="content active">
          <div class="top-info">
            <div><span>agar.su</span>
              <div onclick="showContent('settings')" class="setting menu-item"><i class="fas fa-gear"></i></div>
            </div>
          </div>
          <div>
            <div class="line"></div></div>
          <div class="progress-container">
            <div class="progress-bar">
              <div class="level-circle" id="levelCircle">0</div>
              <div class="progress-fill"></div>
              <div class="progress-text" id="progressText">0% (0/0)</div>
            </div>
          </div><span id="accountID">ID: 0000</span>
          <div class="avatar-containers">
            <div class="avatar-container">
              <div class="previous-skin" id="prevSkin" onclick="showPrevious()"></div>
              <div class="arrow" id="previous" onclick="showPrevious()">&#10094;</div>
              <div onclick="showContent('skinslist')" id="skinss" class="main-skin anims"></div>
              <div class="arrow" id="next" onclick="showNext()">&#10095;</div>
              <div class="next-skin" id="nextSkin" onclick="showNext()"></div>
            </div>
            <div class="input-container">
              <form>
                <input type="text" placeholder="–ù–∏–∫" name="name" maxlength="16" class="noPress" id="nick" required autocomplete="username" />
                <input type="password" placeholder="–ü–∞—Å—Å" name="pass" maxlength="6" class="noPress" id="pass" required autocomplete="current-password" />
              </form>
            </div>
          </div>
		  <div class="servers">
		  <ul class="gamemode">
<ul class="gamemode">
  <li data-ip="ffa.agar.su:6001" id="ffa"><span class="fi fi-ru"></span>FFA - ùôàùô§ùô®ùôòùô§ùô¨<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/120</span></li>
  <li data-ip="ffa.agar.su:6002" id="ms"><span class="fi fi-ru"></span>MegaSplit<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/120</span></li>
  <li data-ip="ffa.agar.su:6003" id="exp"><span class="fi fi-ru"></span>Experemental<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/50</span></li>
	<li data-ip="ffa.agar.su:6004" id="pvp1"><span class="fi fi-ru"></span>pvp1: 1x1 ffa 1k<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/50</span></li>
	<li data-ip="ffa.agar.su:6005" id="pvp2"><span class="fi fi-ru"></span>pvp2: 2x2 ms 1k<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/50</span></li>
	<li data-ip="ffa.agar.su:6006" id="tournament"><span class="fi fi-ru"></span>Tournament<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/120</span></li>
</ul> 
</div>
          <div class="nav-buttons">
            <button onclick="spectate();" class="nav-button serv-button"><i class="fas fa-eye"></i> –ù–ê–ë–õ–Æ–î–ê–¢–¨ </button>
            <button onclick="startGame();return false;" class="nav-button play-button"><i class="fas fa-play"></i> –ò–ì–†–ê–¢–¨ </button>
          </div>
        </div>
        <div id="rating" class="content">
          <div class="top-info">
            <div><span>–õ—É—á—à–∏–µ –ò–≥—Ä–æ–∫–∏</span></div>
          </div>
          <div class="header-row">
            <div class="cell">–ü–æ–∑–∏—Ü–∏—è</div>
            <div class="cell nr">–ù–∏–∫</div>
            <div class="cell">–£—Ä–æ–≤–µ–Ω—å</div>
            <div class="cell">–ê–≤–∞—Ç–∞—Ä</div>
          </div>
          <div id="table-container"></div>
        </div>
        <div id="store" class="content">
          <div class="top-info">
            <div><span>–ö–∞–±–∏–Ω–µ—Ç</span></div>
          </div>
          <div>
<div id="myNicknamesBlock" style="display:none;">
  <div class="tabs" id="myNickClanTabs" data-ready="1">
    <button id="tabNicknames" type="button" class="tab active">–í–∞—à–∏ –Ω–∏–∫–∏ <span class="badge" id="badgeNick">0</span></button>
    <button id="tabClans" type="button" class="tab">–í–∞—à–∏ –∫–ª–∞–Ω—ã <span class="badge" id="badgeClan">0</span></button>
	<button id="logoutButton" class="tab" onclick="logoutAccount()">–í—ã—Ö–æ–¥</button>
  </div>
  <div class="list-wrap" id="nickWrap" style=""><ul id="myNickList" class="list"></ul></div>
  <div class="list-wrap" id="clanWrap" style="display:none;"><ul id="myClanList" class="list"></ul></div>
</div>
<div id="authlog">
  <!-- Google -->
  <div id="g_id_onload"
       data-client_id="157257230972-jhlcisbgal67sn75gib37fb1m1de5jiu.apps.googleusercontent.com"
       data-auto_prompt="false"
       data-callback="onGoogleAuth"></div>
  <div class="g_id_signin"></div>

  <!-- Telegram -->
  <script async src="https://telegram.org/js/telegram-widget.js?22"
          data-telegram-login="agarsu_auth_bot"
          data-size="large"
          data-onauth="onTelegramAuth(user)"
          data-request-access="write"></script>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <canvas id="canvas"></canvas>
  <style>
  /* –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
  .rec-panel {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    display: grid;
    gap: 8px;
    padding: 10px 12px;
    background: rgba(8, 12, 20, 0.7);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    backdrop-filter: blur(6px);
    user-select: none;
    z-index: 9999;
    min-width: 130px;
  }

  .rec-btn {
    all: unset;
    cursor: pointer;
    text-align: center;
    padding: 10px 14px;
    border-radius: 12px;
    font-weight: 600;
    background: #1b2a44;
    outline: 1px solid rgba(255,255,255,0.08);
  }
  .rec-btn:hover { filter: brightness(1.1); }
  .rec-btn:active { transform: translateY(1px); }

  .rec-btn.recording {
    background: #b51e1e;
  }

  .time {
    display: flex;
    align-items: center;
    gap: 8px;
    font-variant-numeric: tabular-nums;
    justify-content: center;
  }

  .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #6d7480;
    box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7);
  }

  .recording-dot {
    background: #ff4757;
    animation: pulse 1.2s infinite;
  }

  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); }
  }

  .hint {
    font-size: 12px;
    opacity: 0.8;
    text-align: center;
  }

  .link {
    font-size: 12px;
    text-align: center;
    word-break: break-all;
  }
</style>

<!-- –ú–∏–Ω–∏-–ø–∞–Ω–µ–ª—å–∫–∞: –∫–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª + —Ç–∞–π–º–µ—Ä + –º–µ—Å—Ç–æ –¥–ª—è —Å—Å—ã–ª–∫–∏ -->
<div class="rec-panel" id="recPanel">
  <button class="rec-btn" id="recBtn" type="button" title="–ù–∞—á–∞—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å">‚óè –ó–∞–ø–∏—Å—å</button>
  <div class="time">
    <div class="dot" id="dot"></div>
    <span id="clock">00:00.0</span>
  </div>
  <div class="hint">–í–ö–õ ‚Üí –ø–∏—à–µ—Ç ‚Ä¢ –í–´–ö–õ ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç</div>
  <div class="link" id="downloadLinkBox"></div>
</div>

<script>
  // ====== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ ======
  // –†–∞–∑–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä–æ–º canvas.
  // –ü–æ—Å—Ç–∞–≤–∏–º 1920x1080@60fps (–º–æ–∂–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏).
  const TARGET_WIDTH = 1920;
  const TARGET_HEIGHT = 1080;
  const FPS = 60;
  const VIDEO_BITRATE = 12_000_000; // 12 Mbps ‚Äî –æ—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è WebM

  // ====== –≠–ª–µ–º–µ–Ω—Ç—ã ======
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d', { alpha: false, desynchronized: true });
  const recBtn = document.getElementById('recBtn');
  const clock = document.getElementById('clock');
  const dot = document.getElementById('dot');
  const linkBox = document.getElementById('downloadLinkBox');

  // –ü–æ–¥–Ω–∏–º–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –¥–æ 1080p —Å —É—á–µ—Ç–æ–º –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–∏–∫—Å–µ–ª–µ–π
  function resizeCanvasToTarget() {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–æ–≤–Ω–æ TARGET_* –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∏–¥–µ–æ
    canvas.width = TARGET_WIDTH;
    canvas.height = TARGET_HEIGHT;

    // –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω –≤–∏–∑—É–∞–ª—å–Ω–æ (CSS —É–∂–µ –Ω–∞ 100%/100%)
    // –ú–æ–∂–Ω–æ —Ä–∏—Å–æ–≤–∞—Ç—å –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∏–∫—Å–µ–ª—è—Ö 1:1
  }
  resizeCanvasToTarget();

  // ====== –î–µ–º–æ-–∞–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ—é –æ—Ç—Ä–∏—Å–æ–≤–∫—É) ======
  let t = 0;
  function draw(ts) {
    t += 1 / FPS;

    // –§–æ–Ω
    ctx.fillStyle = '#0b0f17';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // –ù–µ–º–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∏
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;

    // –í—Ä–∞—â–∞—é—â–∏–π—Å—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π ¬´–¥–∏—Å–∫¬ª
    const r = Math.min(cx, cy) * 0.75;
    const grd = ctx.createRadialGradient(cx, cy, r * 0.1, cx, cy, r);
    grd.addColorStop(0, '#193657');
    grd.addColorStop(1, '#0b0f17');
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.arc(cx, cy, r, 0, Math.PI * 2);
    ctx.fill();

    // –û—Ä–±–∏—Ç—ã
    const count = 90;
    ctx.save();
    ctx.translate(cx, cy);
    for (let i = 0; i < count; i++) {
      const a = (i / count) * Math.PI * 2 + t * 0.6;
      const rr = r * 0.85;
      const x = Math.cos(a) * rr;
      const y = Math.sin(a) * rr;
      ctx.fillStyle = 'rgba(200,220,255,0.65)';
      ctx.beginPath();
      ctx.arc(x, y, 2 + (i % 5 === 0 ? 2 : 0), 0, Math.PI * 2);
      ctx.fill();
    }
    ctx.restore();

    // –¢–µ–∫—Å—Ç-–ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–≤–µ—Ä—Ö
    ctx.fillStyle = 'rgba(231,236,243,0.9)';
    ctx.font = '28px ui-sans-serif, system-ui';
    ctx.textAlign = 'center';
    ctx.fillText('Canvas Demo ‚Äî –ó–∞–ø–∏—Å—å –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞', cx, cy + r + 50);

    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);

  // ====== –ó–∞—Ö–≤–∞—Ç –∏ –∑–∞–ø–∏—Å—å ======
  let stream = null;
  let recorder = null;
  let chunks = [];
  let isRecording = false;

  // –¢–∞–π–º–µ—Ä
  let startMs = 0;
  let timerId = null;

  function pickBestMimeType() {
    const candidates = [
      'video/webm;codecs=vp9',
      'video/webm;codecs=vp8',
      'video/webm',
    ];
    for (const mt of candidates) {
      if (MediaRecorder.isTypeSupported(mt)) return mt;
    }
    // –ö–∞–∫ –∫—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π –≤–µ—Ä–Ω—ë–º –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ ‚Äî –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–±–µ—Ä—ë—Ç —Å–∞–º (–µ—Å–ª–∏ —É–º–µ–µ—Ç)
    return '';
  }

  function formatClock(elapsedMs) {
    const total = Math.floor(elapsedMs);
    const ms = Math.floor((elapsedMs % 1000) / 100); // –¥–µ—Å—è—Ç—ã–µ
    const s = Math.floor((total / 1000) % 60);
    const m = Math.floor((total / 1000 / 60) % 60);
    const mm = String(m).padStart(2, '0');
    const ss = String(s).padStart(2, '0');
    return `${mm}:${ss}.${ms}`;
  }

  function startTimer() {
    startMs = performance.now();
    clock.textContent = '00:00.0';
    if (timerId) clearInterval(timerId);
    timerId = setInterval(() => {
      const now = performance.now();
      clock.textContent = formatClock(now - startMs);
    }, 100);
  }

  function stopTimer() {
    if (timerId) clearInterval(timerId);
    timerId = null;
  }

  function filename() {
    const d = new Date();
    const pad = (n) => String(n).padStart(2, '0');
    return `canvas-recording-${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}_${pad(d.getHours())}-${pad(d.getMinutes())}-${pad(d.getSeconds())}.webm`;
  }

  async function startRecording() {
    // –ó–∞—Ö–≤–∞—Ç 60fps
    stream = canvas.captureStream(FPS);

    const mimeType = pickBestMimeType();
    const options = {};
    if (mimeType) options.mimeType = mimeType;
    options.videoBitsPerSecond = VIDEO_BITRATE;

    try {
      recorder = new MediaRecorder(stream, options);
    } catch (e) {
      alert('MediaRecorder –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
      console.error(e);
      return;
    }

    chunks = [];
    recorder.ondataavailable = (e) => {
      if (e.data && e.data.size > 0) chunks.push(e.data);
    };
    recorder.onstop = () => {
      stopTimer();
      dot.classList.remove('recording-dot');
      // –°–æ–±–∏—Ä–∞–µ–º –≤–∏–¥–µ–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
      const blob = new Blob(chunks, { type: recorder.mimeType || 'video/webm' });
      const url = URL.createObjectURL(blob);

      // –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞
      const a = document.createElement('a');
      a.href = url;
      a.download = filename();
      document.body.appendChild(a);
      a.click();
      a.remove();

      // –¢–∞–∫–∂–µ –ø–æ–∫–∞–∂–µ–º —Å—Å—ã–ª–∫—É (–≤–¥—Ä—É–≥ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞)
      linkBox.innerHTML = '';
      const link = document.createElement('a');
      link.href = url;
      link.textContent = '–°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ';
      link.download = filename();
      link.style.color = '#9ecbff';
      linkBox.appendChild(link);

      // –û—á–∏—â–∞–µ–º
      stream.getTracks().forEach(t => t.stop());
      stream = null;
      recorder = null;
      chunks = [];
    };

    recorder.start(100); // —Å–æ–±–∏—Ä–∞–µ–º —á–∞–Ω–∫–∏ –∫–∞–∂–¥—ã–µ 100–º—Å
    startTimer();
    dot.classList.add('recording-dot');
    isRecording = true;
    recBtn.classList.add('recording');
    recBtn.textContent = '‚ñ† –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å';
  }

  function stopRecording() {
    if (recorder && recorder.state !== 'inactive') {
      recorder.stop(); // —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç onstop ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    }
    isRecording = false;
    recBtn.classList.remove('recording');
    recBtn.textContent = '‚óè –ó–∞–ø–∏—Å—å';
  }

  recBtn.addEventListener('click', async () => {
    if (!isRecording) {
      await startRecording();
    } else {
      stopRecording(); // ¬´–≤—ã–∫–ª¬ª ‚Äî –≤–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
    }
  });

  // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è Safari/iOS
  (function warnIfLimitedSupport() {
    const ua = navigator.userAgent.toLowerCase();
    const isSafari = /^((?!chrome|android).)*safari/.test(ua);
    if (isSafari) {
      console.warn('Safari –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–∞–ø–∏—Å—å WebM. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏.');
    }
  })();

  // (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  window.addEventListener('beforeunload', () => {
    if (isRecording) stopRecording();
  });
</script>
  <div class="chatX_window" id="chatX_window">
    <div class="chatX_top" id="chatX_top">
	<div onclick="switchToDialog(null);" class="chatX_top_avatar"><i class="fa fa-globe"></i></div>
      <div class="chatX_burger" id="chatX_burger"><i class="fa-solid fa-bars nresize"></i></div>
      <div class="chatX_close" onclick="document.getElementById('chatX_window').style.display = 'none'; document.getElementById('onchat').style.display = 'flex';" id="chatX_close"><i class="fa-solid fa-xmark"></i></div>
    </div>
    <div class="chatX_container" id="chatX_container">
      <div class="chatX_feed" id="chatX_feed">	  </div>
    </div>
	  		  	  	  <div class="emoji-list">
  <div class="emoji-item" data-code=":50:"><img src="/emoji/50.gif"></div>
  <div class="emoji-item" data-code=":253:"><img src="/emoji/253.gif"></div>
  <div class="emoji-item" data-code=":26:"><img src="/emoji/26.gif"></div>
  <div class="emoji-item" data-code=":104:"><img src="/emoji/104.png"></div>
  <div class="emoji-item" data-code=":105:"><img src="/emoji/105.png"></div>
  <div class="emoji-item" data-code=":92:"><img src="/emoji/92.png"></div>
  <div class="emoji-item" data-code=":5:"><img src="/emoji/5.png"></div>
</div>
    <div class="chatX_emch">
      <div class="coord" id="emoji_toggle"><i class="fa-solid fa-face-grin-squint"></i></div>
	 <input style="display:none;" id="ls"></input>
      <input class="noPress" id="chat_textbox" maxlength="120" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off"></input>
    </div>
  </div>
  <div id="onchat"><i class="fa fa-message"></i></div>
  <div class="homemenu"><i class="fas fa-home"></i></div>
  <div class="score-info" id="score-info">
    <div class="scorr" id="score-max">0</div>
    <div class="scorr" id="score-new">0</div>
    <div class="cell-length" id="cell-length">0</div>
  </div>
  <div id="leaderboard"><div class="topclose" onclick="document.getElementById('leaderboard').style.display = 'none'; document.getElementById('onleaderboard').style.display = 'flex';"><i class="fa fa-close"></i></div><h4>–¢–æ–ø –°–µ–π—á–∞—Å</h4><div id="toplistnow"></div></div>
<div id="onleaderboard"><i class="fa fa-bar-chart"></i></div>
  <div id="serverclose-overlay">
    <div id="serverclose"><i class="clozs fas fa-spinner fa-spin"></i>
      <div>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ—Ç–µ—Ä—è–Ω–æ.</div>
		<div class="closereset" onclick="location.reload()" >reset</div>
    </div>
  </div>
  <div id="map" class="map">
    <div class="map-header">
      <div class="ping-container">
    ping: <span id="ping">0</span> | fps: <span id="fps">0</span>
</div>

      <div class="mapclose" onclick="document.getElementById('map').style.display = 'none'; document.getElementById('onmap').style.display = 'flex';"><i class="fa fa-close"></i></div>
    </div>
    <div class="map-container"><span id="mapposition"></span>
      <div><span>A1</span></div>
      <div><span>A2</span></div>
      <div><span>A3</span></div>
      <div><span>A4</span></div>
      <div><span>A5</span></div>
      <div><span>B1</span></div>
      <div><span>B2</span></div>
      <div><span>B3</span></div>
      <div><span>B4</span></div>
      <div><span>B5</span></div>
      <div><span>C1</span></div>
      <div><span>C2</span></div>
      <div><span>C3</span></div>
      <div><span>C4</span></div>
      <div><span>C5</span></div>
      <div><span>D1</span></div>
      <div><span>D2</span></div>
      <div><span>D3</span></div>
      <div><span>D4</span></div>
      <div><span>D5</span></div>
      <div><span>E1</span></div>
      <div><span>E2</span></div>
      <div><span>E3</span></div>
      <div><span>E4</span></div>
      <div><span>E5</span></div>
    </div>
  </div>
  <div id="onmap"><i class="fa fa-compass"></i></div>
  <div id="statics" class="overlays">
    <div class="statsWrapper">
      <div class="headerstats">
        <h1>–ë–ª–æ–≥–µ—Ä—Å–∫–∞—è –¢–µ–º–∞</h1></div>
      <div class="statYout">
        <a href="https://youtu.be/RvGQwzrDFtE" target="_blank" class="statYoutt"><img src="https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png" alt="Play" class="statYoutImg"></a>
      </div>
      <h2 class="statTitle">–ñ–¥—ë–º —Ç–≤–æ—ë –≤–∏–¥–µ–æ üé•</h2>
      <p class="statDesc"><strong>1.</strong> –°–Ω–∏–º–∏ –∫—Ä—É—Ç–æ–µ –≤–∏–¥–µ–æ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ <strong>agar.su</strong> –∏ –æ–ø—É–±–ª–∏–∫—É–π –µ–≥–æ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö: YouTube, TikTok, –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
        <br><strong>2.</strong> –ù–∞–±–µ—Ä–∏ —Ö–æ—Ç—è–±—ã 10 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.
        <br><strong>3.</strong> –ü—Ä–∏—à–ª–∏ –Ω–∞–º —Å—Å—ã–ª–∫—É –≤ Telegram: <a href="https://t.me/agarsu" target="_blank" class="statLink">@agarsu</a> –∏ –º—ã –¥–æ–±–∞–≤–∏–º –µ–≥–æ —Å—é–¥–∞.</p>
    </div>
    <div id="statsWrapper" class="statsWrapper">
      <div class="headerstats">
        <h1>–¢–≤–æ—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
        <div id="closeStats" class="closeStats"><i class="fa-solid fa-xmark"></i></div>
      </div>
      <canvas id="statsGraph" width="320" height="150"></canvas>
      <div class="share-label">–ø–æ–¥–µ–ª–∏—Ç—å—Å—è:</div>
      <div id="buttons">
        <button class="social-btn fab fa-vk vk" title="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ"></button>
        <button class="social-btn fab fa-telegram telegram" title="Telegram"></button>
        <button class="social-btn fab fa-whatsapp whatsapp" title="WhatsApp"></button>
        <button class="social-btn fab fa-facebook facebook" title="Facebook"></button>
        <button class="social-btn fab fa-twitter twitter" title="Twitter"></button>
      </div>
      <div id="shareText"></div>
      <div class="nav-buttons">
        <div onclick="spectate();" class="nav-button serv-button"><i class="fas fa-eye"></i>–ù–∞–±–ª—é–¥–∞—Ç—å</div>
        <button id="button-text" onclick="startGame();return false;" class="nav-button play-button"><i class="fas fa-play"></i> –ò–ì–†–ê–¢–¨</button>
      </div>
    </div>
    <div class="statsWrapper">
      <div class="headerstats">
        <h1 id="serverTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ffa</h1></div>
      <div class="header-rowwraper">
        <div>–ü–æ–∑–∏—Ü–∏—è</div>
        <div>–ù–∏–∫</div>
        <div>–°—á–µ—Ç</div>
        <div>–°–∫–∏–Ω</div>
      </div>
      <div id="table-containerwraper"></div>
    </div>
  </div>
  <div id="freeze">Pause <i style="color:red;" class="fa fa-pause"></i></div>
  <div id="notification-container">
    <div id="logout-notification" class="notification">Login close</div>
  </div>
</body>

</html>
