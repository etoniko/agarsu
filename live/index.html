<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Agar.su ‚Äî –ª—É—á—à–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ agar.io. –ò–≥—Ä–∞–π—Ç–µ –æ–Ω–ª–∞–π–Ω –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å: –ø–æ–≥–ª–æ—â–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏, —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ —Å—Ç–∞–Ω—å—Ç–µ –ª–∏–¥–µ—Ä–æ–º —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –∫–ª–æ–Ω–æ–≤ agar –∏ agario.">
    <meta name="author" content="Agar.su Team">
    <meta name="robots" content="index">
    <!-- Open Graph –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π -->
    <meta property="og:title" content="Agar.su - –ó–∞–≤–æ–µ–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!">
    <meta property="og:description" content="absorb cells, compete with other players, and become the leader among all agar and agario clones.">
    <meta property="og:image" content="assets/photo/ogimage.jpeg">
    <meta property="og:url" content="https://agar.su">
    <meta property="og:type" content="website">
    <title>Agar.su</title>
    <!-- Favicon –∏ –∏–∫–æ–Ω–∫–∏ –¥–ª—è Apple —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" href="/icon.svg" type="image/x-icon">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://agar.su">
    <!-- –®—Ä–∏—Ñ—Ç—ã –∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=new_releases" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://api.agar.su/assets/style.css" rel="stylesheet">
    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="/assets/scripts/jquery.js?0.0.2"></script>
    <script src="/assets/scripts/log.js?0.0.2"></script>
    <script src="/assets/scripts/vector.js?0.0.2"></script>
    <script src="https://api.agar.su/assets/scripts/main_out2.js"></script>
	<script src="https://api.agar.su/assets/scripts/shop.js" defer></script>
	<script src="/assets/scripts/all.js?0.0.35" defer></script>
	<script src="/assets/scripts/pass.js?0.0.2" defer></script>
	<script src="/assets/scripts/skins.js?0.0.2" defer></script>
	<script src="/assets/scripts/rating.js?0.0.4" defer></script>
</head>
<body>
  <div id="overlays" class="overlays">
    <div class="social"><a href="https://t.me/agarsu" target="_blank" class="tg"><i style="background: radial-gradient(white 9px, #1e90ff00 50%);border-radius: 50%;" class="fab fa-telegram"></i></a><a href="https://vk.com/club233723574" target="_blank" class="soc"><i class="fab fa-vk"></i></a><a href="#" class="soc"><i style="cursor: not-allowed;" class="fab fa-discord"></i></a></div>
    <div class="center">
      <div class="sidebar">
        <div class="menu-item" onclick="showContent('shop')"><i class="fas fa-shop"></i><span class="label">–ú–∞–≥–∞–∑–∏–Ω</span></div>
        <div class="menu-item" onclick="showContent('skinslist')"><i class="fas fa-image"></i><span class="label">–°–∫–∏–Ω—ã</span></div>
        <div class="menu-item active" onclick="showContent('home')"><i class="fas fa-home"></i><span class="label">–ì–ª–∞–≤–Ω–∞—è</span></div>
        <div class="menu-item" onclick="showContent('rating')"><i class="fas fa-star"></i><span class="label">–†–µ–π—Ç–∏–Ω–≥</span></div>
        <div class="menu-item" onclick="showContent('store')"><i class="fas fa-user"></i><span class="label">–í–æ–π—Ç–∏</span></div>
      </div>
      <div class="main-content">


<div id="shop" class="content">
	<div class="top-info"><div><span>–°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—á–∫–∏</span></div></div>
<div class="shop-container">
  <div class="avatar-section">
    <label id="previewContainer" for="fileInput">
      <canvas id="previewCanvas" width="512" height="512"></canvas>
      <img id="previewGif" alt="GIF preview">
    </label>
    <input type="file" id="fileInput" accept=".png,.jpg,.gif" autocomplete="off">
    <div id="fileError" class="error"></div>

    <form id="paymentForm" autocomplete="off">
      <div class="radio-group">
        <label><input type="radio" name="serviceType" value="personal" id="personal" checked autocomplete="off"><span>–î–ª—è —Å–µ–±—è</span></label>
        <label><input type="radio" name="serviceType" value="clan" id="clan" autocomplete="off"><span>–î–ª—è –∫–ª–∞–Ω–∞</span></label>
      </div>

      <div class="input-group">
        <div id="nicknameWrapper">
          <input type="text" id="nickname" placeholder="–ü—Ä–∏–¥—É–º–∞–π —Å–µ–±–µ –Ω–∏–∫" required maxlength="15" title="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫" autocomplete="off">
          <span id="charCount">0/15</span>
        </div>
        <div id="nicknameError" class="error"></div>
      </div>

      <div class="input-group">
        <div class="password-wrapper">
          <input type="password" id="password" placeholder="–ü—Ä–∏–¥—É–º–∞–π —Å–µ–±–µ –ø–∞—Ä–æ–ª—å" maxlength="5" autocomplete="off">
          <i id="togglePassword" class="fa-solid fa-eye eye"></i>
        </div>
        <div id="passwordError" class="error"></div>
      </div>

      <div id="formError" class="error"></div>
      <button type="submit" id="buyButton" disabled>–ö–£–ü–ò–¢–¨ –ó–ê 0 –†–£–ë–õ–ï–ô</button>
    </form>
  </div>

  <div class="oplata">
    <div id="calculator" style="display:none">
      <h3>–†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h3>
      <p id="clanMultiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplierText">1x (–¥–ª—è —Å–µ–±—è)</span></p>
      <p id="passwordCost">–ü–∞—Ä–æ–ª—å: 0 ‚ÇΩ</p>
      <p id="skinCost">–°–∫–∏–Ω: 0 ‚ÇΩ</p>
      <div id="totalAmount">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
    </div>
  </div>
</div>
        </div>

		  
        <div id="settings" class="content">
          <div class="top-info">
            <div><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
          </div>
          <div class="checkbox-container">
<label>
  <input type="checkbox" class="save" data-box-id="1" onchange="setSkins($(this).is(':checked'));">–í–∏–¥–µ—Ç—å –°–∫–∏–Ω—ã
</label>
<label>
  <input type="checkbox" class="save" data-box-id="2" onchange="setNames($(this).is(':checked'));">–í–∏–¥–µ—Ç—å –ò–º–µ–Ω–∞
</label>
<label>
  <input type="checkbox" class="save" data-box-id="3" onchange="setColors($(this).is(':checked'));">–¶–≤–µ—Ç–∞
</label>
<label>
  <input type="checkbox" class="save" data-box-id="4" onchange="setMouseClicks($(this).is(':checked'));">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–∫–∞ –º—ã—à–∫–∏
</label>
<label>
  <input type="checkbox" class="save" data-box-id="5" onchange="setShowMass($(this).is(':checked'));" checked>–ü–æ–∫–∞–∑–∞—Ç—å –ú–∞—Å—Å—É
</label>
<label>
  <input type="checkbox" class="save" data-box-id="6" onchange="setSmooth($(this).is(':checked'));">–ü—Ä–æ—Å—Ç–æ–π –†–µ–Ω–¥–µ—Ä
</label>
<label>
  <input type="checkbox" class="save" data-box-id="7" onchange="setNoBorder($(this).is(':checked'));">–û—Ç–∫–ª—é—á–∏—Ç—å –æ–±–≤–æ–¥–∫—É
</label>
<label>
  <input type="checkbox" class="save" data-box-id="8" onchange="setChatHide($(this).is(':checked'));">–û—Ç–∫–ª—é—á–∏—Ç—å —á–∞—Ç
</label>
<label>
  <input type="checkbox" class="save" data-box-id="9" onchange="setGlow($(this).is(':checked'));" checked>–≠—Ñ—Ñ–µ–∫—Ç –õ–∏–º–∏—Ç–∞
</label>




			  
  <div id="theme-selector">
    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É:</label>
    <select id="theme-select">
      <option value="gradient">–ì—Ä–∞–¥–∏–µ–Ω—Ç</option>
      <option value="white">–ë–µ–ª–∞—è</option>
      <option value="black">–ß–µ—Ä–Ω–∞—è</option>
    </select>
  </div>

  <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ -->
  <div id="gradient-settings">
  <div class="color-picker">
    <span>–¶–≤–µ—Ç —Ü–µ–Ω—Ç—Ä–∞:</span>
    <input type="color" id="gradient-center" value="#132745">
  </div>
  <div class="color-picker">
    <span>–¶–≤–µ—Ç –∫—Ä–∞—ë–≤:</span>
    <input type="color" id="gradient-edge" value="#000000">
  </div>
</div>
</div>
			  
          </div>
        <div id="skinslist" class="content">
          <div style="display: flex;flex-direction: column;justify-content: space-around;" class="top-info">
            <div class="gall"><span>–°–∫–∏–Ω—ã</span></div>
            <ul class="gallery">
              <li style="background-image: url('https://i.imgur.com/tq33YWv.png');" onclick="selectSkin('–ú—É—Ö–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/dzQIxk0.png');" onclick="selectSkin('–ü–∞—É–∫');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/fpDpEl9.png');" onclick="selectSkin('–ö–∞–∫—Ç—É—Å');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/69ChrNV.png');" onclick="selectSkin('–ó–∞—è');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/qRq5CIg.png');" onclick="selectSkin('–û—Å–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/TPgKn6V.png');" onclick="selectSkin('–Ø—â–µ—Ä–∏—Ü–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/QPCVdvQ.png');" onclick="selectSkin('–õ–∏—Å–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/YbmC0tv.png');" onclick="selectSkin('–í–æ–ª–∫');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/hmVJPmb.png');" onclick="selectSkin('–ú–∞–º–æ–Ω—Ç');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/RKtDpin.png');" onclick="selectSkin('–î–∏–Ω–æ–∑–∞–≤—Ä');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/3hxdGAq.png');" onclick="selectSkin('–ú–æ—Ä–æ–∂–µ–Ω–æ–µ');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/zdcHEFS.png');" onclick="selectSkin('–†–∞–∫–µ—Ç–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/roUvNMV.png');" onclick="selectSkin('–ú–æ–≥—É—á–∞—è');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/57BzylL.png');" onclick="selectSkin('–§–∞—É–Ω');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/rPlbHK7.png');" onclick="selectSkin('–ë–∞–±—É—à–∫–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/ruAUEpb.png');" onclick="selectSkin('–ì–æ—Ä–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/ipqCMMf.png');" onclick="selectSkin('–ö–æ—Å–º–æ–Ω–∞–≤—Ç');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/wRiL4Jx.png');" onclick="selectSkin('–ü–µ—Ä–≤–æ–±—ã—Ç–Ω—ã–π');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/GTxoIhj.png');" onclick="selectSkin('–í–ª—é–±–ª—ë–Ω–Ω—ã–π');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/EcW6zbE.png');" onclick="selectSkin('–í–ª—é–±–ª—ë–Ω–Ω–∞—è');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/UINxrlJ.png');" onclick="selectSkin('–°–∞–º–±–∞');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/lxAXnAi.png');" onclick="selectSkin('–°–Ω–µ–≥–æ–≤–∏–∫');showContent('home')"></li>
              <li style="background-image: url('https://i.imgur.com/7GWqCnY.png');" onclick="selectSkin('–ü–∞–Ω–¥–∞');showContent('home')"></li>
              <li>
                <a style="display: block;width: 100%;height: 100%;background-image: url('assets/photo/skinstg.png');background-size: cover;" onclick="showContent('shop');"></a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Home Content -->
        <div id="home" class="content active">
          <div class="top-info">
            <div><span>agar.su</span>
              <div onclick="showContent('settings')" class="setting menu-item"><i class="fas fa-gear"></i></div>
            </div>
          </div>
          <div>
            <div class="line"></div></div>
          <div class="progress-container">
            <div class="progress-bar">
              <div class="level-circle" id="levelCircle">0</div>
              <div class="progress-fill"></div>
              <div class="progress-text" id="progressText">0% (0/0)</div>
            </div>
          </div><span id="accountID">ID: 0000</span>
          <div class="avatar-containers">
            <div class="avatar-container">
              <div class="previous-skin" id="prevSkin" onclick="showPrevious()"></div>
              <div class="arrow" id="previous" onclick="showPrevious()">&#10094;</div>
              <div onclick="showContent('skinslist')" id="skinss" class="main-skin anims"></div>
              <div class="arrow" id="next" onclick="showNext()">&#10095;</div>
              <div class="next-skin" id="nextSkin" onclick="showNext()"></div>
            </div>
            <div class="input-container">
              <form>
                <input type="text" placeholder="–ù–∏–∫" name="name" maxlength="16" class="noPress" id="nick" required autocomplete="username" />
                <input type="password" placeholder="–ü–∞—Å—Å" name="pass" maxlength="6" class="noPress" id="pass" required autocomplete="current-password" />
              </form>
            </div>
          </div>
		  <div class="servers">
		  <ul class="gamemode">
<ul class="gamemode">
  <li data-ip="ffa.agar.su:6001" id="ffa"><span class="fi fi-ru"></span>FFA - ùôàùô§ùô®ùôòùô§ùô¨<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/120</span></li>
  <li data-ip="ffa.agar.su:6002" id="ms"><span class="fi fi-ru"></span>MegaSplit<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/120</span></li>
  <li data-ip="ffa.agar.su:6003" id="exp"><span class="fi fi-ru"></span>Experemental<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/50</span></li>
	<li data-ip="ffa.agar.su:6004" id="pvp1"><span class="fi fi-ru"></span>pvp1: 1x1 ffa 1k<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/50</span></li>
	<li data-ip="ffa.agar.su:6005" id="pvp2"><span class="fi fi-ru"></span>pvp2: 2x2 ms 1k<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/50</span></li>
	<li data-ip="ffa.agar.su:6006" id="tournament"><span class="fi fi-ru"></span>Tournament<i class="fas fa-eye"></i><span class="online-count">0</span><i class="fas fa-user"></i><span class="online-count">0/120</span></li>
</ul> 
</div>
          <div class="nav-buttons">
            <button onclick="spectate();" class="nav-button serv-button"><i class="fas fa-eye"></i> –ù–ê–ë–õ–Æ–î–ê–¢–¨ </button>
            <button onclick="startGame();return false;" class="nav-button play-button"><i class="fas fa-play"></i> –ò–ì–†–ê–¢–¨ </button>
          </div>
        </div>
        <div id="rating" class="content">
          <div class="top-info">
            <div><span>–õ—É—á—à–∏–µ –ò–≥—Ä–æ–∫–∏</span></div>
          </div>
          <div class="header-row">
            <div class="cell">–ü–æ–∑–∏—Ü–∏—è</div>
            <div class="cell nr">–ù–∏–∫</div>
            <div class="cell">–£—Ä–æ–≤–µ–Ω—å</div>
            <div class="cell">–ê–≤–∞—Ç–∞—Ä</div>
          </div>
          <div id="table-container"></div>
        </div>
        <div id="store" class="content">
          <div class="top-info">
            <div><span>–ö–∞–±–∏–Ω–µ—Ç</span></div>
          </div>
          <div>
<div id="myNicknamesBlock" style="display:none;">
  <div class="tabs" id="myNickClanTabs" data-ready="1">
    <button id="tabNicknames" type="button" class="tab active">–í–∞—à–∏ –Ω–∏–∫–∏ <span class="badge" id="badgeNick">0</span></button>
    <button id="tabClans" type="button" class="tab">–í–∞—à–∏ –∫–ª–∞–Ω—ã <span class="badge" id="badgeClan">0</span></button>
	<button id="logoutButton" class="tab" onclick="logoutAccount()">–í—ã—Ö–æ–¥</button>
  </div>
  <div class="list-wrap" id="nickWrap" style=""><ul id="myNickList" class="list"></ul></div>
  <div class="list-wrap" id="clanWrap" style="display:none;"><ul id="myClanList" class="list"></ul></div>
</div>
<div id="authlog">
  <!-- Google -->
  <div id="g_id_onload"
       data-client_id="157257230972-jhlcisbgal67sn75gib37fb1m1de5jiu.apps.googleusercontent.com"
       data-auto_prompt="false"
       data-callback="onGoogleAuth"></div>
  <div class="g_id_signin"></div>

  <!-- Telegram -->
  <script async src="https://telegram.org/js/telegram-widget.js?22"
          data-telegram-login="agarsu_auth_bot"
          data-size="large"
          data-onauth="onTelegramAuth(user)"
          data-request-access="write"></script>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <canvas id="canvas"></canvas>
<!-- ===== CSS ===== -->
<style>
  #recPanel{
    position:absolute; z-index:999999; left:0; top:0;
    font:12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:#eaeaea; background:rgba(20,20,25,.9); border:1px solid rgba(255,255,255,.12);
    border-radius:10px; padding:10px; width:260px; box-shadow:0 8px 24px rgba(0,0,0,.35);
    user-select:none; backdrop-filter: blur(6px);
  }
  #recPanel.mini{width:auto; padding:6px 8px}
  #recPanel header{display:flex; align-items:center; gap:8px; margin-bottom:8px; cursor:move}
  #recPanel .title{font-weight:700}
  #recPanel .spacer{flex:1}
  #recPanel button, #recPanel select, #recPanel input{
    font:inherit; color:#eaeaea; background:#2a2a33; border:1px solid #3d3d48;
    border-radius:8px; padding:6px 10px; cursor:pointer
  }
  #recPanel button:disabled{opacity:.5; cursor:not-allowed}
  #recPanel .row{display:flex; gap:8px; align-items:center; margin:6px 0}
  #recPanel .pill{padding:4px 8px; border-radius:999px; background:#23232b}
  #recPanel .dot{width:8px; height:8px; border-radius:50%; background:#ef4444; display:inline-block; margin-right:6px}
  #recPanel .green{background:#22c55e}
  #recPanel .timer{font-variant-numeric:tabular-nums; font-weight:700}
  #recPanel .mini-only{display:none}
  #recPanel.mini .mini-hide{display:none}
  #recPanel.mini .mini-only{display:inline-flex}
</style>

<!-- ===== HTML (–ø–∞–Ω–µ–ª—å –Ω–µ –≤–Ω—É—Ç—Ä–∏ canvas) ===== -->
<div id="recPanel" aria-live="polite">
  <header id="recDrag">
    <span class="title">Canvas Recorder</span>
    <span class="spacer"></span>
    <button id="miniBtn" title="–ú–∏–Ω–∏-—Ä–µ–∂–∏–º">‚Äî</button>
    <button id="closeBtn" title="–°–∫—Ä—ã—Ç—å">√ó</button>
  </header>

  <div class="row mini-hide">
    <label>FPS&nbsp;<input id="fpsIn" type="number" min="1" max="120" value="60" style="width:70px"></label>
    <label>Bitrate&nbsp;<input id="bpsIn" type="number" min="100000" step="100000" value="10000000" style="width:110px"></label>
  </div>

  <div class="row mini-hide">
    <select id="mimeSel" title="–§–æ—Ä–º–∞—Ç">
      <option value="">–ê–≤—Ç–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</option>
      <option value="video/webm;codecs=vp9">video/webm;codecs=vp9</option>
      <option value="video/webm;codecs=vp8">video/webm;codecs=vp8</option>
      <option value="video/webm;codecs=h264">video/webm;codecs=h264</option>
      <option value="video/mp4;codecs=h264">video/mp4;codecs=h264 (–Ω–µ –≤–µ–∑–¥–µ)</option>
    </select>
  </div>

  <div class="row">
    <button id="startBtn">‚óè –°—Ç–∞—Ä—Ç</button>
    <button id="pauseBtn" disabled>‚è∏ –ü–∞—É–∑–∞</button>
    <button id="resumeBtn" disabled>‚ñ∂ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    <button id="stopBtn" disabled>‚ñ† –°—Ç–æ–ø</button>
    <button id="saveBtn" disabled>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </div>

  <div class="row">
    <span id="statusPill" class="pill"><span class="dot" id="dot"></span><span id="statusTxt">stopped</span></span>
    <span class="pill">–í—Ä–µ–º—è: <span class="timer" id="timer">00:00:00</span></span>
    <span class="pill mini-only">REC <span class="timer" id="timerMini">00:00</span></span>
  </div>
</div>

<!-- ===== JS ===== -->
<script>
(function(){
  const canvas = document.getElementById('canvas'); // —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ–º
  if(!canvas) { console.error('–ù–µ—Ç #canvas'); return; }

  // --- –ø–∞–Ω–µ–ª—å –∏ —ç–ª–µ–º–µ–Ω—Ç—ã
  const panel = document.getElementById('recPanel');
  const dragHandle = document.getElementById('recDrag');
  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resumeBtn = document.getElementById('resumeBtn');
  const stopBtn = document.getElementById('stopBtn');
  const saveBtn = document.getElementById('saveBtn');
  const fpsIn = document.getElementById('fpsIn');
  const bpsIn = document.getElementById('bpsIn');
  const mimeSel = document.getElementById('mimeSel');
  const statusTxt = document.getElementById('statusTxt');
  const dot = document.getElementById('dot');
  const timerEl = document.getElementById('timer');
  const timerMini = document.getElementById('timerMini');
  const miniBtn = document.getElementById('miniBtn');
  const closeBtn = document.getElementById('closeBtn');

  // --- —Ä–∞–∑–º–µ—â–∞–µ–º –ø–∞–Ω–µ–ª—å –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∫–∞–Ω–≤–∞—Å–∞
  positionPanelInCanvas(10,10);

  // --- –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–º–æ–∫ –∫–∞–Ω–≤–∞—Å–∞
  (function enableDragWithinCanvas(){
    let sx=0, sy=0, startLeft=0, startTop=0, dragging=false;
    dragHandle.addEventListener('mousedown', e=>{
      dragging=true; sx=e.clientX; sy=e.clientY;
      const r = panel.getBoundingClientRect();
      startLeft=r.left; startTop=r.top;
      e.preventDefault();
    });
    window.addEventListener('mousemove', e=>{
      if(!dragging) return;
      const dx=e.clientX-sx, dy=e.clientY-sy;
      const desiredLeft=startLeft+dx, desiredTop=startTop+dy;
      placeClamped(desiredLeft, desiredTop);
    });
    window.addEventListener('mouseup', ()=> dragging=false);
    window.addEventListener('resize', ()=> clampToCanvas());
    window.addEventListener('scroll', ()=> clampToCanvas());
  })();

  function positionPanelInCanvas(offsetX, offsetY){
    const cr = canvas.getBoundingClientRect();
    panel.style.left = (cr.left + offsetX) + 'px';
    panel.style.top  = (cr.top  + offsetY) + 'px';
  }
  function placeClamped(absLeft, absTop){
    const cr = canvas.getBoundingClientRect();
    const pr = panel.getBoundingClientRect();
    const minL = cr.left, maxL = cr.right - pr.width;
    const minT = cr.top,  maxT = cr.bottom - pr.height;
    const L = Math.min(Math.max(absLeft,  minL), maxL);
    const T = Math.min(Math.max(absTop,   minT), maxT);
    panel.style.left = L+'px';
    panel.style.top  = T+'px';
  }
  function clampToCanvas(){
    const r = panel.getBoundingClientRect();
    placeClamped(r.left, r.top);
  }

  // --- —Ä–µ–∫–æ—Ä–¥–µ—Ä
  let mediaRecorder=null, chunks=[], lastBlob=null, timerInt=null;
  let startedAt=0, elapsedBeforePause=0;

  function setState(s){
    statusTxt.textContent=s;
    dot.className = s==='recording' ? 'dot green' : 'dot';
    startBtn.disabled = !(s==='idle'||s==='stopped');
    pauseBtn.disabled = !(s==='recording');
    resumeBtn.disabled= !(s==='paused');
    stopBtn.disabled  = !(s==='recording'||s==='paused');
    saveBtn.disabled  = !lastBlob;
  }
  function fmtHMS(ms){
    const s=Math.floor(ms/1000);
    const h=String(Math.floor(s/3600)).padStart(2,'0');
    const m=String(Math.floor(s%3600/60)).padStart(2,'0');
    const sec=String(s%60).padStart(2,'0');
    return `${h}:${m}:${sec}`;
  }
  function fmtMMSS(ms){
    const s=Math.floor(ms/1000);
    const m=String(Math.floor(s/60)).padStart(2,'0');
    const sec=String(s%60).padStart(2,'0');
    return `${m}:${sec}`;
  }
  function startTimer(){
    clearInterval(timerInt);
    timerInt=setInterval(()=>{
      const now=performance.now();
      const base=elapsedBeforePause + (mediaRecorder && mediaRecorder.state==='recording' ? now-startedAt : 0);
      timerEl.textContent=fmtHMS(base);
      timerMini.textContent=fmtMMSS(base);
    },200);
  }
  function stopTimer(){ clearInterval(timerInt); timerEl.textContent='00:00:00'; timerMini.textContent='00:00'; }

  function pickMime(pref){
    const list=[pref,'video/webm;codecs=vp9','video/webm;codecs=vp8','video/webm;codecs=h264','video/mp4;codecs=h264','video/webm',''];
    for(const t of list){ if(t && MediaRecorder.isTypeSupported(t)) return t; }
    return '';
  }

  startBtn.onclick = () => {
    try{
      const fps = Math.max(1, Math.min(120, parseInt(fpsIn.value||60,10)));
      const bps = Math.max(100_000, parseInt(bpsIn.value||10_000_000,10));
      const type = pickMime(mimeSel.value||'');

      const stream = canvas.captureStream(fps); // —á–∏—Ç–∞–µ–º –ø–æ—Ç–æ–∫ —Å –∫–∞–Ω–≤–∞—Å–∞
      chunks=[]; lastBlob=null; elapsedBeforePause=0; startedAt=performance.now();

      mediaRecorder = new MediaRecorder(stream, { mimeType:type, bitsPerSecond:bps });
      mediaRecorder.ondataavailable = e=>{ if(e.data && e.data.size) chunks.push(e.data); };
      mediaRecorder.onstop = ()=>{
        const blob = new Blob(chunks, { type: mediaRecorder.mimeType });
        lastBlob = blob;
        const ext = blob.type.includes('mp4') ? 'mp4' : 'webm';
        const ts = new Date().toISOString().replace(/[:.]/g,'-');
        const name = `canvas-${canvas.width}x${canvas.height}-${ts}.${ext}`;
        download(blob, name); // –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é ¬´–≤—ã–∫–ª¬ª
        setState('stopped'); stopTimer();
      };
      mediaRecorder.onpause = ()=>{ elapsedBeforePause += performance.now()-startedAt; setState('paused'); };
      mediaRecorder.onresume= ()=>{ startedAt=performance.now(); setState('recording'); };

      mediaRecorder.start();
      setState('recording'); startTimer();
    }catch(err){ alert('–°—Ç–∞—Ä—Ç –∑–∞–ø–∏—Å–∏ –Ω–µ —É–¥–∞–ª—Å—è: '+err); setState('idle'); }
  };

  pauseBtn.onclick  = ()=>{ if(mediaRecorder && mediaRecorder.state==='recording') mediaRecorder.pause(); };
  resumeBtn.onclick = ()=>{ if(mediaRecorder && mediaRecorder.state==='paused') mediaRecorder.resume(); };
  stopBtn.onclick   = ()=>{ if(mediaRecorder && (mediaRecorder.state==='recording'||mediaRecorder.state==='paused')) mediaRecorder.stop(); };
  saveBtn.onclick   = ()=>{ if(lastBlob) download(lastBlob, `canvas-save-${Date.now()}.${lastBlob.type.includes('mp4')?'mp4':'webm'}`); };

  function download(blob, filename){
    const a=document.createElement('a');
    a.href=URL.createObjectURL(blob); a.download=filename; document.body.appendChild(a); a.click();
    setTimeout(()=>{ URL.revokeObjectURL(a.href); a.remove(); }, 0);
  }

  // –º–∏–Ω–∏-—Ä–µ–∂–∏–º –∏ –∑–∞–∫—Ä—ã—Ç—å
  miniBtn.onclick = ()=> panel.classList.toggle('mini');
  closeBtn.onclick = ()=> panel.style.display='none';

  // –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  setState('idle');

})();
</script>





	
  
  <div class="chatX_window" id="chatX_window">
    <div class="chatX_top" id="chatX_top">
	<div onclick="switchToDialog(null);" class="chatX_top_avatar"><i class="fa fa-globe"></i></div>
      <div class="chatX_burger" id="chatX_burger"><i class="fa-solid fa-bars nresize"></i></div>
      <div class="chatX_close" onclick="document.getElementById('chatX_window').style.display = 'none'; document.getElementById('onchat').style.display = 'flex';" id="chatX_close"><i class="fa-solid fa-xmark"></i></div>
    </div>
    <div class="chatX_container" id="chatX_container">
      <div class="chatX_feed" id="chatX_feed">	  </div>
    </div>
	  		  	  	  <div class="emoji-list">
  <div class="emoji-item" data-code=":50:"><img src="/emoji/50.gif"></div>
  <div class="emoji-item" data-code=":253:"><img src="/emoji/253.gif"></div>
  <div class="emoji-item" data-code=":26:"><img src="/emoji/26.gif"></div>
  <div class="emoji-item" data-code=":104:"><img src="/emoji/104.png"></div>
  <div class="emoji-item" data-code=":105:"><img src="/emoji/105.png"></div>
  <div class="emoji-item" data-code=":92:"><img src="/emoji/92.png"></div>
  <div class="emoji-item" data-code=":5:"><img src="/emoji/5.png"></div>
</div>
    <div class="chatX_emch">
      <div class="coord" id="emoji_toggle"><i class="fa-solid fa-face-grin-squint"></i></div>
	 <input style="display:none;" id="ls"></input>
      <input class="noPress" id="chat_textbox" maxlength="120" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off"></input>
    </div>
  </div>
  <div id="onchat"><i class="fa fa-message"></i></div>
  <div class="homemenu"><i class="fas fa-home"></i></div>
  <div class="score-info" id="score-info">
    <div class="scorr" id="score-max">0</div>
    <div class="scorr" id="score-new">0</div>
    <div class="cell-length" id="cell-length">0</div>
  </div>
  <div id="leaderboard"><div class="topclose" onclick="document.getElementById('leaderboard').style.display = 'none'; document.getElementById('onleaderboard').style.display = 'flex';"><i class="fa fa-close"></i></div><h4>–¢–æ–ø –°–µ–π—á–∞—Å</h4><div id="toplistnow"></div></div>
<div id="onleaderboard"><i class="fa fa-bar-chart"></i></div>
  <div id="serverclose-overlay">
    <div id="serverclose"><i class="clozs fas fa-spinner fa-spin"></i>
      <div>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ—Ç–µ—Ä—è–Ω–æ.</div>
		<div class="closereset" onclick="location.reload()" >reset</div>
    </div>
  </div>
  <div id="map" class="map">
    <div class="map-header">
      <div class="ping-container">
    ping: <span id="ping">0</span> | fps: <span id="fps">0</span>
</div>

      <div class="mapclose" onclick="document.getElementById('map').style.display = 'none'; document.getElementById('onmap').style.display = 'flex';"><i class="fa fa-close"></i></div>
    </div>
    <div class="map-container"><span id="mapposition"></span>
      <div><span>A1</span></div>
      <div><span>A2</span></div>
      <div><span>A3</span></div>
      <div><span>A4</span></div>
      <div><span>A5</span></div>
      <div><span>B1</span></div>
      <div><span>B2</span></div>
      <div><span>B3</span></div>
      <div><span>B4</span></div>
      <div><span>B5</span></div>
      <div><span>C1</span></div>
      <div><span>C2</span></div>
      <div><span>C3</span></div>
      <div><span>C4</span></div>
      <div><span>C5</span></div>
      <div><span>D1</span></div>
      <div><span>D2</span></div>
      <div><span>D3</span></div>
      <div><span>D4</span></div>
      <div><span>D5</span></div>
      <div><span>E1</span></div>
      <div><span>E2</span></div>
      <div><span>E3</span></div>
      <div><span>E4</span></div>
      <div><span>E5</span></div>
    </div>
  </div>
  <div id="onmap"><i class="fa fa-compass"></i></div>
  <div id="statics" class="overlays">
    <div class="statsWrapper">
      <div class="headerstats">
        <h1>–ë–ª–æ–≥–µ—Ä—Å–∫–∞—è –¢–µ–º–∞</h1></div>
      <div class="statYout">
        <a href="https://youtu.be/RvGQwzrDFtE" target="_blank" class="statYoutt"><img src="https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png" alt="Play" class="statYoutImg"></a>
      </div>
      <h2 class="statTitle">–ñ–¥—ë–º —Ç–≤–æ—ë –≤–∏–¥–µ–æ üé•</h2>
      <p class="statDesc"><strong>1.</strong> –°–Ω–∏–º–∏ –∫—Ä—É—Ç–æ–µ –≤–∏–¥–µ–æ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ <strong>agar.su</strong> –∏ –æ–ø—É–±–ª–∏–∫—É–π –µ–≥–æ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö: YouTube, TikTok, –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
        <br><strong>2.</strong> –ù–∞–±–µ—Ä–∏ —Ö–æ—Ç—è–±—ã 10 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.
        <br><strong>3.</strong> –ü—Ä–∏—à–ª–∏ –Ω–∞–º —Å—Å—ã–ª–∫—É –≤ Telegram: <a href="https://t.me/agarsu" target="_blank" class="statLink">@agarsu</a> –∏ –º—ã –¥–æ–±–∞–≤–∏–º –µ–≥–æ —Å—é–¥–∞.</p>
    </div>
    <div id="statsWrapper" class="statsWrapper">
      <div class="headerstats">
        <h1>–¢–≤–æ—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
        <div id="closeStats" class="closeStats"><i class="fa-solid fa-xmark"></i></div>
      </div>
      <canvas id="statsGraph" width="320" height="150"></canvas>
      <div class="share-label">–ø–æ–¥–µ–ª–∏—Ç—å—Å—è:</div>
      <div id="buttons">
        <button class="social-btn fab fa-vk vk" title="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ"></button>
        <button class="social-btn fab fa-telegram telegram" title="Telegram"></button>
        <button class="social-btn fab fa-whatsapp whatsapp" title="WhatsApp"></button>
        <button class="social-btn fab fa-facebook facebook" title="Facebook"></button>
        <button class="social-btn fab fa-twitter twitter" title="Twitter"></button>
      </div>
      <div id="shareText"></div>
      <div class="nav-buttons">
        <div onclick="spectate();" class="nav-button serv-button"><i class="fas fa-eye"></i>–ù–∞–±–ª—é–¥–∞—Ç—å</div>
        <button id="button-text" onclick="startGame();return false;" class="nav-button play-button"><i class="fas fa-play"></i> –ò–ì–†–ê–¢–¨</button>
      </div>
    </div>
    <div class="statsWrapper">
      <div class="headerstats">
        <h1 id="serverTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ffa</h1></div>
      <div class="header-rowwraper">
        <div>–ü–æ–∑–∏—Ü–∏—è</div>
        <div>–ù–∏–∫</div>
        <div>–°—á–µ—Ç</div>
        <div>–°–∫–∏–Ω</div>
      </div>
      <div id="table-containerwraper"></div>
    </div>
  </div>
  <div id="freeze">Pause <i style="color:red;" class="fa fa-pause"></i></div>
  <div id="notification-container">
    <div id="logout-notification" class="notification">Login close</div>
  </div>
</body>

</html>
