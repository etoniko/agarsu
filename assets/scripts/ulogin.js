"4.1.0p";
(function(r,y,H,K){typeof r.easyXDM=="undefined"&&function(a,b,d,e,k,g){function w(c,f){var h=typeof c[f];return h=="function"||!(h!="object"||!c[f])||h=="unknown"}function E(){if(!J(H.plugins)&&typeof H.plugins["Shockwave Flash"]=="object"){var c=H.plugins["Shockwave Flash"].description;c&&!J(H.mimeTypes)&&H.mimeTypes["application/x-shockwave-flash"]&&H.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(T=c.match(/\d+/g))}if(!T)try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");T=
Array.prototype.slice.call(f.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(h){}if(!T)return!1;c=parseInt(T[0],10);f=parseInt(T[1],10);ca=c>9&&f>0;return!0}function A(){if(!U){U=!0;for(var c=0;c<Y.length;c++)Y[c]();Y.length=0}}function C(c,f){U?c.call(f):Y.push(function(){c.call(f)})}function O(){var c=parent;if(W!=="")for(var f=0,h=W.split(".");f<h.length;f++)c=c[h[f]];return c.easyXDM}function F(c){var f=c.toLowerCase().match(Z);c=f[2];var h=f[3];f=f[4]||"";if(c=="http:"&&f==
":80"||c=="https:"&&f==":443")f="";return c+"//"+h+f}function R(c){c=c.replace(oa,"$1/");if(!c.match(/^(http||https):\/\//)){var f=c.substring(0,1)==="/"?"":d.pathname;f.substring(f.length-1)!=="/"&&(f=f.substring(0,f.lastIndexOf("/")+1));c=d.protocol+"//"+d.host+f+c}for(;ha.test(c);)c=c.replace(ha,"");return c}function P(c,f){var h="",l=c.indexOf("#");l!==-1&&(h=c.substring(l),c=c.substring(0,l));l=[];for(var p in f)f.hasOwnProperty(p)&&l.push(p+"="+g(f[p]));return c+(ia?"#":c.indexOf("?")==-1?"?":
"&")+l.join("&")+h}function J(c){return typeof c==="undefined"}function I(c,f,h){var l;for(l in f)if(f.hasOwnProperty(l))if(l in c){var p=f[l];typeof p==="object"?I(c[l],p,h):h||(c[l]=f[l])}else c[l]=f[l];return c}function S(c){if(J(aa)){var f=b.body.appendChild(b.createElement("form")),h=f.appendChild(b.createElement("input"));h.name=N+"TEST"+ja;aa=h!==f.elements[h.name];b.body.removeChild(f)}aa?f=b.createElement('<iframe name="'+c.props.name+'"/>'):(f=b.createElement("IFRAME"),f.name=c.props.name);
f.id=f.name=c.props.name;delete c.props.name;typeof c.container=="string"&&(c.container=b.getElementById(c.container));c.container||(I(f.style,{position:"absolute",top:"-2000px",left:"0px"}),c.container=b.body);h=c.props.src;c.props.src="javascript:false";I(f,c.props);f.border=f.frameBorder=0;f.allowTransparency=!0;c.container.appendChild(f);c.onLoad&&Q(f,"load",c.onLoad);if(c.usePost){var l=c.container.appendChild(b.createElement("form"));l.target=f.name;l.action=h;l.method="POST";if(typeof c.usePost===
"object")for(var p in c.usePost)if(c.usePost.hasOwnProperty(p)){if(aa)var n=b.createElement('<input name="'+p+'"/>');else n=b.createElement("INPUT"),n.name=p;n.value=c.usePost[p];l.appendChild(n)}l.submit();l.parentNode.removeChild(l)}else f.src=h;c.props.src=h;return f}function ka(c){var f=c.protocol;c.isHost=c.isHost||J(L.xdm_p);ia=c.hash||!1;c.props||(c.props={});if(c.isHost)c.remote=R(c.remote),c.channel=c.channel||"default"+ja++,c.secret=Math.random().toString(16).substring(2),J(f)&&(f=F(d.href)==
F(c.remote)?"4":w(a,"postMessage")||w(b,"postMessage")?"1":c.swf&&w(a,"ActiveXObject")&&E()?"6":H.product==="Gecko"&&"frameElement"in a&&H.userAgent.indexOf("WebKit")==-1?"5":c.remoteHelper?"2":"0");else{c.channel=L.xdm_c.replace(/["'<>\\]/g,"");c.secret=L.xdm_s;c.remote=L.xdm_e.replace(/["'<>\\]/g,"");f=L.xdm_p;var h;if(h=c.acl){a:{h=c.acl;var l=c.remote;typeof h=="string"&&(h=[h]);for(var p,n=h.length;n--;)if(p=h[n],p=new RegExp(p.substr(0,1)=="^"?p:"^"+p.replace(/(\*)/g,".$1").replace(/\?/g,".")+
"$"),p.test(l)){h=!0;break a}h=!1}h=!h}if(h)throw Error("Access denied for "+c.remote);}c.protocol=f;switch(f){case "0":I(c,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(c.isHost){if(!c.local){f=d.protocol+"//"+d.host;var m=b.body.getElementsByTagName("img");for(l=m.length;l--;)if(h=m[l],h.src.substring(0,f.length)===f){c.local=h.src;break}c.local||(c.local=a)}f={xdm_c:c.channel,xdm_p:0};c.local===a?(c.usePolling=!0,c.useParent=!0,c.local=d.protocol+"//"+d.host+d.pathname+
d.search,f.xdm_e=c.local,f.xdm_pa=1):f.xdm_e=R(c.local);c.container&&(c.useResize=!1,f.xdm_po=1);c.remote=P(c.remote,f)}else I(c,{channel:L.xdm_c,remote:L.xdm_e,useParent:!J(L.xdm_pa),usePolling:!J(L.xdm_po),useResize:c.useParent?!1:c.useResize});m=[new t.stack.HashTransport(c),new t.stack.ReliableBehavior({}),new t.stack.QueueBehavior({encode:!0,maxLength:4E3-c.remote.length}),new t.stack.VerifyBehavior({initiate:c.isHost})];break;case "1":m=[new t.stack.PostMessageTransport(c)];break;case "2":c.isHost&&
(c.remoteHelper=R(c.remoteHelper));m=[new t.stack.NameTransport(c),new t.stack.QueueBehavior,new t.stack.VerifyBehavior({initiate:c.isHost})];break;case "3":m=[new t.stack.NixTransport(c)];break;case "4":m=[new t.stack.SameOriginTransport(c)];break;case "5":m=[new t.stack.FrameElementTransport(c)];break;case "6":T||E(),m=[new t.stack.FlashTransport(c)]}m.push(new t.stack.QueueBehavior({lazy:c.lazy,remove:!0}));return m}function la(c){for(var f,h={incoming:function(n,m){this.up.incoming(n,m)},outgoing:function(n,
m){this.down.outgoing(n,m)},callback:function(n){this.up.callback(n)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},l=0,p=c.length;l<p;l++)f=c[l],I(f,h,!0),l!==0&&(f.down=c[l-1]),l!==p-1&&(f.up=c[l+1]);return f}function pa(c){c.up.down=c.down;c.down.up=c.up;c.up=c.down=null}var ba=this,ja=Math.floor(Math.random()*1E4),da=Function.prototype,Z=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,ha=/[\-\w]+\/\.\.\//,oa=/([^:])\/\//g,W="",t={},qa=a.easyXDM,N="easyXDM_",aa,ia=!1,T,ca;if(w(a,
"addEventListener")){var Q=function(c,f,h){c.addEventListener(f,h,!1)};var X=function(c,f,h){c.removeEventListener(f,h,!1)}}else if(w(a,"attachEvent"))Q=function(c,f,h){c.attachEvent("on"+f,h)},X=function(c,f,h){c.detachEvent("on"+f,h)};else throw Error("Browser not supported");var U=!1,Y=[];if("readyState"in b){var ea=b.readyState;U=ea=="complete"||~H.userAgent.indexOf("AppleWebKit/")&&(ea=="loaded"||ea=="interactive")}else U=!!b.body;if(!U){if(w(a,"addEventListener"))Q(b,"DOMContentLoaded",A);else if(Q(b,
"readystatechange",function(){b.readyState=="complete"&&A()}),b.documentElement.doScroll&&a===top){var ma=function(){if(!U){try{b.documentElement.doScroll("left")}catch(c){e(ma,1);return}A()}};ma()}Q(a,"load",A)}var L=function(c){c=c.substring(1).split("&");for(var f={},h,l=c.length;l--;)h=c[l].split("="),f[h[0]]=k(h[1]);return f}(/xdm_e=/.test(d.search)?d.search:d.hash),fa=function(){var c={},f={a:[1,2,3]};if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(f).replace(/\s/g,
"")==='{"a":[1,2,3]}')return JSON;Object.toJSON&&Object.toJSON(f).replace(/\s/g,"")==='{"a":[1,2,3]}'&&(c.stringify=Object.toJSON);typeof String.prototype.evalJSON==="function"&&(f='{"a":[1,2,3]}'.evalJSON(),f.a&&f.a.length===3&&f.a[2]===3&&(c.parse=function(h){return h.evalJSON()}));return c.stringify&&c.parse?(fa=function(){return c},c):null};I(t,{version:"2.4.19.0",query:L,stack:{},apply:I,getJSONObject:fa,whenReady:C,noConflict:function(c){a.easyXDM=qa;(W=c)&&(N="easyXDM_"+W.replace(".","_")+
"_");return t}});t.DomHelper={on:Q,un:X,requiresJSON:function(c){typeof a.JSON=="object"&&a.JSON||b.write('<script type="text/javascript" src="'+c+'">\x3c/script>')}};(function(){var c={};t.Fn={set:function(f,h){c[f]=h},get:function(f,h){if(c.hasOwnProperty(f)){var l=c[f];h&&delete c[f];return l}}}})();t.Socket=function(c){var f=la(ka(c).concat([{incoming:function(l,p){c.onMessage(l,p)},callback:function(l){if(c.onReady)c.onReady(l)}}])),h=F(c.remote);this.origin=F(c.remote);this.destroy=function(){f.destroy()};
this.postMessage=function(l){f.outgoing(l,h)};f.init()};t.Rpc=function(c,f){if(f.local)for(var h in f.local)if(f.local.hasOwnProperty(h)){var l=f.local[h];typeof l==="function"&&(f.local[h]={method:l})}var p=la(ka(c).concat([new t.stack.RpcBehavior(this,f),{callback:function(n){if(c.onReady)c.onReady(n)}}]));this.origin=F(c.remote);this.destroy=function(){p.destroy()};p.init()};t.stack.SameOriginTransport=function(c){var f,h,l,p;return f={outgoing:function(n,m,u){l(n);u&&u()},destroy:function(){h&&
(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){p=F(c.remote);c.isHost?(I(c.props,{src:P(c.remote,{xdm_e:d.protocol+"//"+d.host+d.pathname,xdm_c:c.channel,xdm_p:4}),name:N+c.channel+"_provider"}),h=S(c),t.Fn.set(c.channel,function(n){l=n;e(function(){f.up.callback(!0)},0);return function(m){f.up.incoming(m,p)}})):(l=O().Fn.get(c.channel)(function(n){f.up.incoming(n,p)}),e(function(){f.up.callback(!0)},0))},init:function(){C(f.onDOMReady,f)}}};t.stack.FlashTransport=function(c){function f(x,
q){e(function(){l.up.incoming(x,n)},0)}function h(x){var q=c.swf+"?host="+c.isHost,v="easyXDM_swf_"+Math.floor(Math.random()*1E4);t.Fn.set("flash_loaded"+x.replace(/[\-.]/g,"_"),function(){t.stack.FlashTransport[x].swf=m=u.firstChild;for(var B=t.stack.FlashTransport[x].queue,z=0;z<B.length;z++)B[z]();B.length=0});c.swfContainer?u=typeof c.swfContainer=="string"?b.getElementById(c.swfContainer):c.swfContainer:(u=b.createElement("div"),I(u.style,ca&&c.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",
right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(u));var D="callback=flash_loaded"+g(x.replace(/[\-.]/g,"_"))+"&proto="+ba.location.protocol+"&domain="+g(ba.location.href.match(Z)[3])+"&port="+g(ba.location.href.match(Z)[4]||"")+"&ns="+g(W);u.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+v+"' data='"+q+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+
q+"'></param><param name='flashvars' value='"+D+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+D+"' allowScriptAccess='always' wmode='transparent' src='"+q+"' height='1' width='1'></embed></object>"}var l,p,n,m,u;return l={outgoing:function(x,q,v){m.postMessage(c.channel,x.toString());v&&v()},destroy:function(){try{m.destroyChannel(c.channel)}catch(x){}m=null;p&&(p.parentNode.removeChild(p),p=null)},onDOMReady:function(){n=c.remote;t.Fn.set("flash_"+c.channel+"_init",function(){e(function(){l.up.callback(!0)})});
t.Fn.set("flash_"+c.channel+"_onMessage",f);c.swf=R(c.swf);var x=c.swf.match(Z)[3],q=function(){t.stack.FlashTransport[x].init=!0;m=t.stack.FlashTransport[x].swf;m.createChannel(c.channel,c.secret,F(c.remote),c.isHost);c.isHost&&(ca&&c.swfNoThrottle&&I(c.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),I(c.props,{src:P(c.remote,{xdm_e:F(d.href),xdm_c:c.channel,xdm_p:6,xdm_s:c.secret}),name:N+c.channel+"_provider"}),p=S(c))};t.stack.FlashTransport[x]&&t.stack.FlashTransport[x].init?
q():t.stack.FlashTransport[x]?t.stack.FlashTransport[x].queue.push(q):(t.stack.FlashTransport[x]={queue:[q]},h(x))},init:function(){C(l.onDOMReady,l)}}};t.stack.PostMessageTransport=function(c){function f(m){if(m.origin)var u=F(m.origin);else if(m.uri)u=F(m.uri);else if(m.domain)u=d.protocol+"//"+m.domain;else throw"Unable to retrieve the origin of the event";u==n&&m.data&&m.data.substring&&m.data.substring(0,c.channel.length+1)==c.channel+" "&&h.up.incoming(m.data.substring(c.channel.length+1),u)}
var h,l,p,n;return h={outgoing:function(m,u,x){p.postMessage(c.channel+" "+m,u||n);x&&x()},destroy:function(){X(a,"message",f);l&&(p=null,l.parentNode.removeChild(l),l=null)},onDOMReady:function(){n=F(c.remote);if(c.isHost){var m=function(u){u.data==c.channel+"-ready"&&(p="postMessage"in l.contentWindow?l.contentWindow:l.contentWindow.document,X(a,"message",m),Q(a,"message",f),e(function(){h.up.callback(!0)},0))};Q(a,"message",m);I(c.props,{src:P(c.remote,{xdm_e:F(d.href),xdm_c:c.channel,xdm_p:1}),
name:N+c.channel+"_provider"});l=S(c)}else Q(a,"message",f),p="postMessage"in a.parent?a.parent:a.parent.document,p.postMessage(c.channel+"-ready",n),e(function(){h.up.callback(!0)},0)},init:function(){C(h.onDOMReady,h)}}};t.stack.FrameElementTransport=function(c){var f,h,l,p;return f={outgoing:function(n,m,u){l.call(this,n);u&&u()},destroy:function(){h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){p=F(c.remote);c.isHost?(I(c.props,{src:P(c.remote,{xdm_e:F(d.href),xdm_c:c.channel,xdm_p:5}),
name:N+c.channel+"_provider"}),h=S(c),h.fn=function(n){delete h.fn;l=n;e(function(){f.up.callback(!0)},0);return function(m){f.up.incoming(m,p)}}):(b.referrer&&F(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e),l=a.frameElement.fn(function(n){f.up.incoming(n,p)}),f.up.callback(!0))},init:function(){C(f.onDOMReady,f)}}};t.stack.NameTransport=function(c){function f(z){u.contentWindow.sendMessage(z,c.remoteHelper+(m?"#_3":"#_2")+c.channel)}function h(){m?++q!==2&&m||n.up.callback(!0):(f("ready"),n.up.callback(!0))}
function l(z){n.up.incoming(z,D)}function p(){v&&e(function(){v(!0)},0)}var n,m,u,x,q,v,D,B;return n={outgoing:function(z,G,V){v=V;f(z)},destroy:function(){u.parentNode.removeChild(u);u=null;m&&(x.parentNode.removeChild(x),x=null)},onDOMReady:function(){m=c.isHost;q=0;D=F(c.remote);c.local=R(c.local);m?(t.Fn.set(c.channel,function(G){m&&G==="ready"&&(t.Fn.set(c.channel,l),h())}),B=P(c.remote,{xdm_e:c.local,xdm_c:c.channel,xdm_p:2}),I(c.props,{src:B+"#"+c.channel,name:N+c.channel+"_provider"}),x=S(c)):
(c.remoteHelper=c.remote,t.Fn.set(c.channel,l));var z=function(){var G=u||this;X(G,"load",z);t.Fn.set(c.channel+"_load",p);(function M(){typeof G.contentWindow.sendMessage=="function"?h():e(M,50)})()};u=S({props:{src:c.local+"#_4"+c.channel},onLoad:z})},init:function(){C(n.onDOMReady,n)}}};t.stack.HashTransport=function(c){function f(){if(x){var B=x.location.href,z="",G=B.indexOf("#");G!=-1&&(z=B.substring(G));z&&z!=m&&(m=z,h.up.incoming(m.substring(m.indexOf("_")+1),D))}}var h,l,p,n,m,u,x,q,v,D;
return h={outgoing:function(B,z){q&&(B=c.remote+"#"+u++ +"_"+B,(l||!v?q.contentWindow:q).location=B)},destroy:function(){a.clearInterval(p);!l&&v||q.parentNode.removeChild(q);q=null},onDOMReady:function(){l=c.isHost;n=c.interval;m="#"+c.channel;u=0;v=c.useParent;D=F(c.remote);if(l){I(c.props,{src:c.remote,name:N+c.channel+"_provider"});if(v)c.onLoad=function(){x=a;p=setInterval(f,n);h.up.callback(!0)};else{var B=0,z=c.delay/50;(function V(){if(++B>z)throw Error("Unable to reference listenerwindow");
try{x=q.contentWindow.frames[N+c.channel+"_consumer"]}catch(M){}x?(p=setInterval(f,n),h.up.callback(!0)):e(V,50)})()}q=S(c)}else x=a,p=setInterval(f,n),v?(q=parent,h.up.callback(!0)):(I(c,{props:{src:c.remote+"#"+c.channel+new Date,name:N+c.channel+"_consumer"},onLoad:function(){h.up.callback(!0)}}),q=S(c))},init:function(){C(h.onDOMReady,h)}}};t.stack.ReliableBehavior=function(c){var f,h,l=0,p=0,n="";return f={incoming:function(m,u){var x=m.indexOf("_"),q=m.substring(0,x).split(",");m=m.substring(x+
1);q[0]==l&&(n="",h&&h(!0));m.length>0&&(f.down.outgoing(q[1]+","+l+"_"+n,u),p!=q[1]&&(p=q[1],f.up.incoming(m,u)))},outgoing:function(m,u,x){n=m;h=x;f.down.outgoing(p+","+ ++l+"_"+m,u)}}};t.stack.QueueBehavior=function(c){function f(){if(c.remove&&l.length===0)pa(h);else if(!p&&l.length!==0&&!m){p=!0;var v=l.shift();h.down.outgoing(v.data,v.origin,function(D){p=!1;v.callback&&e(function(){v.callback(D)},0);f()})}}var h,l=[],p=!0,n="",m,u=0,x=!1,q=!1;return h={init:function(){J(c)&&(c={});c.maxLength&&
(u=c.maxLength,q=!0);c.lazy?x=!0:h.down.init()},callback:function(v){p=!1;var D=h.up;f();D.callback(v)},incoming:function(v,D){if(q){var B=v.indexOf("_"),z=parseInt(v.substring(0,B),10);n+=v.substring(B+1);z===0&&(c.encode&&(n=k(n)),h.up.incoming(n,D),n="")}else h.up.incoming(v,D)},outgoing:function(v,D,B){c.encode&&(v=g(v));var z=[];if(q){for(;v.length!==0;){var G=v.substring(0,u);v=v.substring(G.length);z.push(G)}for(;G=z.shift();)l.push({data:z.length+"_"+G,origin:D,callback:z.length===0?B:null})}else l.push({data:v,
origin:D,callback:B});x?h.down.init():f()},destroy:function(){m=!0;h.down.destroy()}}};t.stack.VerifyBehavior=function(c){function f(){l=Math.random().toString(16).substring(2);h.down.outgoing(l)}var h,l,p;return h={incoming:function(n,m){var u=n.indexOf("_");u===-1?n===l?h.up.callback(!0):p||(p=n,c.initiate||f(),h.down.outgoing(n)):n.substring(0,u)===p&&h.up.incoming(n.substring(u+1),m)},outgoing:function(n,m,u){h.down.outgoing(l+"_"+n,m,u)},callback:function(n){c.initiate&&f()}}};t.stack.RpcBehavior=
function(c,f){function h(q){q.jsonrpc="2.0";n.down.outgoing(m.stringify(q))}function l(q,v){var D=Array.prototype.slice;return function(){var B=arguments.length,z={method:v};if(B>0&&typeof arguments[B-1]==="function"){if(B>1&&typeof arguments[B-2]==="function"){var G={success:arguments[B-2],error:arguments[B-1]};z.params=D.call(arguments,0,B-2)}else G={success:arguments[B-1]},z.params=D.call(arguments,0,B-1);x[""+ ++u]=G;z.id=u}else z.params=D.call(arguments,0);q.namedParams&&z.params.length===1&&
(z.params=z.params[0]);h(z)}}function p(q,v,D,B){if(D){if(v){var z=function(M){z=da;h({id:v,result:M})};var G=function(M,na){G=da;M={id:v,error:{code:-32099,message:M}};na&&(M.error.data=na);h(M)}}else z=G=da;Object.prototype.toString.call(B)!=="[object Array]"&&(B=[B]);try{var V=D.method.apply(D.scope,B.concat([z,G]));J(V)||z(V)}catch(M){G(M.message)}}else v&&h({id:v,error:{code:-32601,message:"Procedure not found."}})}var n,m=f.serializer||fa(),u=0,x={};return n={incoming:function(q,v){q=m.parse(q);
q.method?f.handle?f.handle(q,h):p(q.method,q.id,f.local[q.method],q.params):(v=x[q.id],q.error?v.error&&v.error(q.error):v.success&&v.success(q.result),delete x[q.id])},init:function(){if(f.remote)for(var q in f.remote)f.remote.hasOwnProperty(q)&&(c[q]=l(f.remote[q],q));n.down.init()},destroy:function(){for(var q in f.remote)f.remote.hasOwnProperty(q)&&c.hasOwnProperty(q)&&delete c[q];n.down.destroy()}}};ba.easyXDM=t}(r,y,location,r.setTimeout,decodeURIComponent,encodeURIComponent);typeof r.uLogin!=
"undefined"&&r.uLogin.uLoginHost||(Array.prototype.indexOf||(Array.prototype.indexOf=function(a){try{for(var b=0;b<this.length;b++)if(this[b]==a)return b}catch(d){}return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),typeof r.console==="undefined"&&(r.console={log:function(){},error:function(){},info:function(){},assert:function(){}}),r.uLogin={uLoginHost:function(a){var b;for(b in a)if(b in a&&a[b].src&&/^https?:\/\/(.*?)\/js\/ulogin\.js/.test(a[b].src)){var d=
a[b].src.match(/^https?:\/\/([^/]+)/)[1].replace(/^www\./,"");break}return d==="u-login.com"?"u-login.com":"ulogin.ru"}(y.getElementsByTagName("script"))},r.uLogin={version:"4",protocol:location.href.match(/^https/i)?"https":"http",host:encodeURIComponent(location.host),uLoginHost:uLogin.uLoginHost,supportStorage:!!("localStorage"in window&&window.localStorage!==null&&"JSON"in window&&window.JSON!==null&&typeof window.JSON.parse!=="undefined"&&typeof window.JSON.stringify!=="undefined"),supportHistory:!(!window.history||
!history.pushState),ids:[],timeouts:{},listeners:{},lang:(H.language||H.systemLanguage||H.userLanguage||"en").substr(0,2).toLowerCase(),langs:"en ru uk fr de uz".split(" "),dialog:!1,close:!1,lightbox:!1,dialogSocket:!1,pixel:!1,providerCodes:[],providerNames:[],states:["ready","open","receive","close","fill"],indexedProviders:{google:{code:5,name:"Google"},livejournal:{code:7,name:"LiveJournal"},liveid:{code:12,name:"LiveID"},soundcloud:{code:13,name:"SoundCloud"},steam:{code:14,name:"Steam"},youtube:{code:16,
name:"YouTube"},foursquare:{code:17,name:"foursquare"}},themes:["classic","flat"],widgetSettings:{},findTimer:0,waitGetWidget:{},altwayCalled:[],rc:!1,page:null,altway:function(a){a=a.toLowerCase();return!!/iPhone|iPad/i.test(a)}(H.userAgent||H.vendor||r.opera),m:!!/(ip(ad|od|hone)|android)/i.test(H.userAgent||H.vendor||r.opera),mobile:function(a){if(/_utl_t=vk/.test(location.href)||/_utl_t=vk/.test(document.referrer))return!1;a=a.toLowerCase();return!!/(ip(ad|od|hone)|android)/i.test(a)}(H.userAgent||
H.vendor||r.opera),openFromSocket:!1,ppi:null,authSocket:!1,availableParams:{id:1,redirect_uri:1,page:1,callback:1,fields:1,force_fields:1,popup_css:1,optional:1,protocol:1,host:1,lang:1,verify:1,sort:1,othprov:1,providers:1,altway:1,m:1,icons_32:1,icons_16:1},cancelClick:!1,postMessageIsAvailable:typeof r.postMessage!=="undefined",init:function(a){for(d in this.indexedProviders){var b=this.indexedProviders[d];this.providerCodes[b.code]=d;this.providerNames[b.code]=b.name}window.__utl__ext__counters||
(window.__utl__ext__counters=!0,function(k,g,w){(g[w]=g[w]||[]).push(function(){try{g.yaCounter82412725=new Ya.Metrika({id:82412725,clickmap:!1,trackLinks:!1,accurateTrackBounce:!0})}catch(C){}});var E=k.getElementsByTagName("script")[0],A=k.createElement("script");w=function(){E.parentNode.insertBefore(A,E)};A.type="text/javascript";A.async=!0;A.src=(k.location.protocol=="https:"?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js";g.opera=="[object Opera]"?k.addEventListener("DOMContentLoaded",w,
!1):w()}(document,window,"yandex_metrika_callbacks"));if(y.body){this.mobile&&(this.altway=!0);this.page=encodeURIComponent(location.href);this.openFromSocket&&(this.authSocket=this.initSocket(this.buildUrl("/version/3.0/html/buttons_receiver.html",{four:"",r:parseInt(Math.random()*1E5)}),this.getRC(),{background:"transparent"}));a==""&&(a=y.getElementsByTagName("script"),a=a[a.length-1].src,a.indexOf("?")==-1&&(a+="?"),a=a.substr(a.indexOf("?")+1));if(a!=""){var d=this.parse(a);d.version&&(this.version=
d.version);if(d.display)if(b=d.id||"uLogin",this.get(b)){a=!0;for(var e=0;e<this.ids.length;e++)b==this.ids[e].id&&(a=!1);a&&this.setProp(d.id||"uLogin",this.ids.length,d)}else K('uLogin.init("'+a+'")',1E3)}this.add(y.body,"touchmove",this.touchMove);uLogin.timeouts.search_all=K(function g(){uLogin.findWidgets();if(y.readyState==="complete"&&(uLogin.findTimer===0&&(uLogin.findTimer=+new Date),new Date-uLogin.findTimer>1E4))return!1;uLogin.timeouts.all=K(g,50)},50);this.findWidgets();uLogin.timeouts.search_ulogin=
K(function w(){uLogin.checkAsyncWidgets();uLogin.timeouts.search_ulogin=K(w,50)},50);this.checkAsyncWidgets();uLogin.timeouts.check_widgets=K(function E(){uLogin.checkCurrentWidgets();uLogin.timeouts.check_widgets=K(E,300)},30);this.checkCurrentWidgets();this.sendPixel();uLogin.postMessageIsAvailable&&(window.addEventListener?window.addEventListener("message",uLogin.onMessage):window.attachEvent("onmessage",uLogin.onMessage))}else K(function(){uLogin.init()},20);this.callbackReceived()},onMessage:function(a){a.origin==
"https://"+uLogin.uLoginHost&&a.data&&a.data.mine&&a.data.func&&(typeof a.data.func==="object"&&(a.data.func=a.data.func[0]),a.data.func==="to_window"?(src=uLogin.buildUrl(a.data.args[2],{fields:a.data.args[0],filled:a.data.args[1],set:encodeURIComponent("{window:1}")}),console.log(src),uLogin.loadWindow(src)):r[a.data.func]&&r[a.data.func].apply(uLogin,a.data.args||[]))},get:function(a){return y.getElementById(a)},exists:function(a){return typeof a!="undefined"},add:function(a,b,d){a.addEventListener?
a.addEventListener(b,function(e){b==="click"&&uLogin.cancelClick||d(a,e)},!1):a.attachEvent?a.attachEvent("on"+b,function(e){b==="click"&&uLogin.cancelClick||d(a,e)}):a["on"+b]=function(e){b==="click"&&uLogin.cancelClick||d(a,e)};b==="click"&&(this.add(a,"touchstart",this.touchStart),this.add(a,"touchend",function(e,k){return function(g,w){uLogin.cancelClick||(uLogin.cancelClick=!0,k.call(this,e,w))}}(a,d)))},touchStart:function(){uLogin.cancelClick=!1},touchMove:function(){uLogin.cancelClick=!0},
is_encoded:function(a){return decodeURIComponent(a)!=a},genID:function(){for(var a=new Date,b=a.getTime()+Math.floor(Math.random()*1E5);this.get("ul_"+b);)b=a.getTime()+Math.floor(Math.random()*1E5);return"ul_"+b},show:function(a){this.exists(a)&&(a.style.display="block")},hide:function(a){a&&this.exists(a)&&(a.style.display="none")},parse:function(a){var b={};if(!a)return b;if(typeof a==="object")return a;var d=a.split("&");d=d.length>1?d:a.split(";");for(a=0;a<d.length;a++){var e=d[a].split("=");
e[0]&&(e[0]=e[0].trim());e[1]&&(e[1]=e[1].trim());b[e[0]]=e[1]}return b},scrollTop:function(){return r.pageYOffset||y.documentElement.scrollTop||y.body.scrollTop},scrollLeft:function(){return r.pageXOffset||y.documentElement.scrollLeft||y.body.scrollLeft},dialogHeight:function(){return 358},dialogWidth:function(){return 564},clientWidth:function(){var a=0;Object.prototype.toString.call(r.opera)=="[object Opera]"&&r.parseFloat(r.opera.version())<9.5?a=y.body.clientWidth:r.innerWidth&&(a=r.innerWidth);
this.isIE()&&(a=y.documentElement.clientWidth);return a},clientHeight:function(){var a=0;Object.prototype.toString.call(r.opera)=="[object Opera]"&&r.parseFloat(r.opera.version())<9.5?a=y.body.clientHeight:r.innerHeight&&(a=r.innerHeight);this.isIE()&&(a=y.documentElement.clientHeight);return a},isIE:function(){if(/MSIE (\d+\.\d+);/.test(H.userAgent)){var a=Number(RegExp.$1);if(a<9)return a}return!1},getPPI:function(){if(this.ppi===null)try{var a=window.devicePixelRatio||1,b=document.getElementsByTagName("body")[0],
d=document.createElement("div");d.style="height: 1in; left: -100%; position: absolute; top: -100%; width: 1in;";b.appendChild(d);var e=d.offsetWidth*a;b.removeChild(d);this.ppi=e}catch(k){this.ppi=96}return this.ppi},inArray:function(a,b){if(!a||!b)return!1;for(var d=0,e=b.length;d<e;d++)if(a==b[d])return d;return-1},findWidgets:function(){for(var a=0,b=[],d=[],e=y.getElementsByTagName("div"),k=y.getElementsByTagName("a");k[a];)k[a]&&(b[a]=k[a]),a++;for(a=0;e[a];)e[a]&&(d[a]=e[a]),a++;for(a=0;d[a]||
b[a];)d[a]&&this.addWidget(d[a]),b[a]&&this.addWidget(b[a]),a++},addWidget:function(a,b){var d=a.id,e=a.getAttribute("data-uloginid"),k={},g=!1;typeof r.uLoginParams!=="undefined"&&(r.uLoginParams[d]?k=r.uLoginParams[d]:r.uLoginParams[e]?k=r.uLoginParams[e]:this.arrayIntersectKey(r.uLoginParams,this.availableParams).length>0&&(k=r.uLoginParams,g=!0));b&&(k=this.extend(k,b));b=a.getAttribute("data-ulogin")||a.getAttribute("x-ulogin-params");g=b!==null||!g&&this.arrayIntersectKey(k,this.availableParams).length>
0;b=this.extend(this.parse(b),k);!e&&!g||d||(d=this.genID(),a.setAttribute("id",d));e?this.getWidget(e,d):g&&this.setProp(d,this.ids.length,b)},inited:function(a){for(var b=0;b<this.ids.length;b++)if(a==this.ids[b].id)return!0;return!1},initWidget:function(a){if(a){var b=this.get(a);if(b&&(b=b.getAttribute("data-ulogin")||b.getAttribute("x-ulogin-params"))&&!this.inited(a)){b=this.parse(b);var d=this.getWidgetNumber(a);isNaN(d)?d=this.ids.length:this.ids[d]={};this.setProp(a,d,b)}}},setProp:function(a,
b,d){if(this.waitGetWidget[a]||this.inited(a))return!1;this.ids[b]={id:a,dropTimer:!1,initCheck:!1,type:d.display||"",providers:d.providers||"",hidden:d.hidden||"",redirect_uri:d.redirect_uri||"",page:this.page,callback:d.callback||"",fields:d.fields||"first_name,last_name,email",force_fields:d.force_fields||"",popup_css:d.popup_css||"",optional:d.optional||"",color:d.color||"fff",opacity:d.opacity||"75",verify:d.verify||"",m:typeof d.m!=="undefined"?d.m:this.m,lang:d.lang||this.lang,altway:typeof d.altway!==
"undefined"?parseInt(d.altway):this.altway,sort:"default",state:"",hidden_button:d.hidden_button||"inset",dropdown_container:d.dropdown_container||"body",icons_32:d.icons_32||"",icons_16:d.icons_16||"",theme:d.theme||"classic",client:d.client||"",event:d.event||"click"};this.inArray(this.ids[b].theme,this.themes)==-1&&(this.ids[b].theme=this.themes[0]);this.ids[b].providers||this.ids[b].other||(this.ids[b].hidden="other");if(this.ids[b].hidden&&this.ids[b].hidden!=="other"){var e=this.ids[b].hidden.split(",");
var k=[];for(A in e){var g=e[A];this.inArray(g,this.providerCodes)>-1&&k.push(g)}this.ids[b].hidden=k.join(",")}if(this.ids[b].providers){e=this.ids[b].providers.split(",");var w=e.length;k=[];var E=0;for(A in e)g=e[A],this.inArray(g,this.providerCodes)>-1?k.push(g):E++;if(k.length<w){e=this.ids[b].hidden.split(",");for(A in this.providerCodes)if(g=this.providerCodes[A],this.inArray(g,k)===-1&&(k.push(g),this.ids[b].hidden!=="other"&&this.inArray(g,e)>-1&&delete e[this.inArray(g,e)]),k.length===w)break;
this.ids[b].hidden=e&&e.length?e.join(","):""}this.ids[b].providers=k.join(",")}if(E>0&&this.ids[b].sort==="relevant"&&this.ids[b].type!=="window"){g=this.ids[b].providers.split(",");if(this.ids[b].hidden==="other")for(k=0;k<this.providerCodes.filter(Boolean).length;k++){var A=this.providerCodes.filter(Boolean)[k];if(this.inArray(A,g)===-1&&(g.push(A),--E===0))break}else{A=this.ids[b].hidden.split(",");for(k=0;k<E;k++)g.push(A[0]),A.splice(0,1);this.ids[b].hidden=A.join(",")}this.ids[b].providers=
g.filter(Boolean).join(",")}this.ids[b].type!=="small"&&this.ids[b].type!=="panel"||this.sendStats({type:this.ids[b].type});this.ids[b].type=="window"&&!this.ids[b].providers&&this.ids[b].hidden&&(this.ids[b].providers=this.providerCodes.filter(Boolean).join(","));this.ids[b].mobile=d.mobilebuttons==0?0:this.mobile;this.ids[b].altway&&!this.ids[b].redirect_uri&&(this.ids[b].redirect_uri=location.href);this.ids[b].callback&&!this.ids[b].altway&&(this.ids[b].redirect_uri="");this.ids[b].redirect_uri=
this.clearRedirectUri(this.ids[b].redirect_uri);this.inArray(this.ids[b].lang,this.langs)==-1&&(this.ids[b].lang=this.lang);this.ids[b].icons_32=this.fixSiteLink(this.ids[b].icons_32);this.ids[b].icons_16=this.fixSiteLink(this.ids[b].icons_16);switch(d.display){case "small":case "panel":this.ids[b].listener_id=!1;this.initPanel(b);break;case "window":this.initWindow(b);break;case "buttons":this.initButtons(b);break;default:this.ids.splice(b,b)}this.get(a).setAttribute("data-ulogin-inited",(+new Date).toString())},
fixSiteLink:function(a){a&&(/^https?:\/\/(.*?)/.test(a)||(/^\//.test(a)||(a="/"+a),a=location.origin+a),(new RegExp("^"+location.origin)).test(a)||(a="",console.error("uLogin ERROR: resource link is invalid, not match with location.origin")),a&&=this.is_encoded(a)?a.replace(/\//g,"%2F").replace(/\?/g,"%3F"):encodeURIComponent(a));return a},clearRedirectUri:function(a){if(!a)return a;a=a.replace(/ulogin_callback=([^&?]*?)#/,"#").replace(/ulogin_callback=(.*?)(&|$)/,"").replace(/ulogin_token=([^&?]*?)#/,
"#").replace(/ulogin_token=(.*?)(&|$)/,"").replace(/(\?|&)#/,"#").replace(/(\?|&)$/,"");return a=this.is_encoded(a)?a.replace(/\//g,"%2F").replace(/\?/g,"%3F"):encodeURIComponent(a)},initPanel:function(a){var b=this.get(this.ids[a].id),d=this.ids[a].type=="small"?1:0,e=d?21:42,k=d?16:32,g=0,w=d?5:10,E=d?"16px":"32px",A="",C="";this.ids[a].icons_16&&d?A=decodeURIComponent(this.ids[a].icons_16):this.ids[a].icons_32&&!d?A=decodeURIComponent(this.ids[a].icons_32):(C=this.getPPI()>120?d?32:64:d?16:32,
A="providers-{size}-{theme}.png?version=img.3.0.2".replace("{size}",C).replace("{theme}",this.ids[a].theme),A=this.buildUrl("version/3.0/img/"+A),C="smiles-{size}.png?version=img.3.0.2".replace("{size}",C).replace("{theme}",this.ids[a].theme),C=this.buildUrl("img/"+C),this.ids[a].hovered_sprite=C);A="url("+A+") "+(d?"0 -1px":"0 -2px")+" no-repeat";b.innerHTML="";if(this.ids[a].hidden==="other"){var O=this.providerCodes.filter(Boolean).slice(0);if(this.ids[a].providers){C=this.ids[a].providers.split(",");
for(var F=0;F<C.length;F++){var R=this.inArray(C[F],O);R!==-1&&O.splice(R,1)}}this.ids[a].hidden=O.toString()}if(this.ids[a].providers){C=this.ids[a].sort==="relevant"?this.relProviders(this.ids[a].providers,this.ids[a].hidden,1):this.ids[a].providers.split(",");var P;g+=e*(this.ids[a].hidden_button==="inset"&&this.ids[a].hidden.length>0?C.length+1:C.length);e=y.createElement("div");this.ids[a].buttonsContainer=e;this.ids[a].buttonsContainer.className="ulogin-buttons-container";this.resetStyle(e,
{width:g,maxWidth:"100%",minHeight:k,verticalAlign:"top",display:"inline-block",lineHeight:0});b.appendChild(e);for(P in C)g=C[P],O=this.inArray(g,this.providerCodes),O>-1&&(e=y.createElement("div"),e.className="ulogin-button-"+g,e.setAttribute("data-uloginbutton",g),e.setAttribute("role","button"),e.setAttribute("title",this.providerNames[O]),this.resetStyle(e,{float:"left",width:k,height:k,margin:"0 "+w+"px "+w+"px 0",background:A,cursor:"pointer",backgroundPosition:this.getIconPosition(d,O),backgroundSize:E}),
this.ids[a].buttonsContainer.appendChild(e))}this.ids[a].hidden&&(b.style.position="relative",this.ids[a].sort==="relevant"&&(this.ids[a].hidden=this.relProviders(this.ids[a].providers,this.ids[a].hidden,2).join(",")),this.ids[a].drop=y.createElement("div"),this.ids[a].drop.className="ulogin-dropdown-button",this.resetStyle(this.ids[a].drop,{width:k,height:k,margin:"0 "+w+"px "+w+"px 0",cursor:"pointer",background:A,verticalAlign:"baseline",display:"inline-block",float:"none",backgroundSize:E}),this.ids[a].mobile||
(this.add(this.ids[a].drop,"mouseover",function(J){uLogin.ids[a].showed=!1;uLogin.dropdownDelayed(a,d?1:2);uLogin.setOpacity(J,uLogin.ids[a].opacity)}),this.add(this.ids[a].drop,"mouseout",function(J){uLogin.ids[a].showed=!0;uLogin.dropdownDelayed(a,0);uLogin.setOpacity(J)}),this.add(this.ids[a].drop,"click",function(){uLogin.dropdown(a,d?1:2)})),this.ids[a].hidden_button==="inset"&&this.ids[a].buttonsContainer?this.ids[a].buttonsContainer.appendChild(this.ids[a].drop):b.appendChild(this.ids[a].drop),
this.ids[a].mobile||this.initDrop(a));this.ids[a].buttonsContainer&&this.ids[a].buttonsContainer.clientHeight>0&&(this.ids[a].buttonsContainer.style.height=this.ids[a].buttonsContainer.clientHeight-w+"px");window.bc=this.ids[a].buttonsContainer;this.initButtons(a)},initWindow:function(a){var b=this.get(this.ids[a].id),d=b.getElementsByTagName("*");d.length?b=d[0]:b.innerHTML?(d=document.createElement("span"),d.innerHTML=b.innerHTML,b.innerHTML="",b=b.appendChild(d)):(d=y.createElement("img"),d.setAttribute("src",
this.buildUrl("img/button.png?version=img.3.0.2")),d.setAttribute("style","cursor:pointer; width:187px; height:30px"),d.setAttribute("alt","\u041c\u0443\u043b\u044c\u0442\u0438\u0412\u0445\u043e\u0434"),b=b.appendChild(d));b.setAttribute("data-uloginbutton","window");b.setAttribute("data-ulogin-default","true");this.ids[a].opacity=75;this.initButtons(a)},sendPixel:function(){this.getRC();if(this.pixel){var a=this;K(function(){if(a.pixel){var b=y.createElement("iframe"),d=a.getRC();b.src=a.pixel.replace("[rand]",
parseInt(1E5*Math.random())).replace("[u]",encodeURIComponent(location.href)).replace("[r]",encodeURIComponent(y.referrer||""));b.width=b.height=1;b.style.display="none";d.appendChild(b);K(function(){d.removeChild(b)},3E3);a.pixel=!1}},0)}},sendStats:function(a){var b={r:parseInt(1E5*Math.random())};a.type&&(b.type=a.type);a=this.buildUrl("stats.html",b);this.initSocket(a,this.getRC())},mergeAccounts:function(a,b){if(!a)return console.error('uLogin ERROR (mergeAccounts): invalid token "'+a+'"'),!1;
a={token:a};b?(typeof b.join!=="undefined"&&(b=b.join(",")),a.identities=encodeURIComponent(b),b=this.buildUrl("merge_accounts.php",a)):b=this.buildUrl("require_verify.php",a);this.loadWindow(b)},getRC:function(){var a=document.getElementById("ulogin_receiver_container");a||(a=y.createElement("div"),a.setAttribute("id","ulogin_receiver_container"),this.resetStyle(a,{width:0,height:0,display:"none"}),y.getElementsByTagName("body")[0].appendChild(a));return a},clearTimeouts:function(){for(var a in this.timeouts)clearTimeout(this.timeouts[a])},
callbackTryCall:function(a,b){this.altwayCalled.push(a);r[a]?setTimeout(function(){r[a].call(r,b)},10):setTimeout(function(){uLogin.callbackTryCall(a,b)},100)},callbackReceived:function(){var a=location.search.replace("?","");if((a=this.parse(a))&&a.ulogin_callback&&a.ulogin_token&&this.inArray(a.ulogin_callback,this.altwayCalled)===-1&&(this.callbackTryCall(a.ulogin_callback,a.ulogin_token),this.supportHistory)){var b=document.getElementsByTagName("title");b=(b=b?b[0]:"")?b.innerHTML:"";delete a.ulogin_callback;
delete a.ulogin_token;a=this.buildUrl("",a,!0);var d=location.origin+location.pathname+a+location.hash;K(function(){window.history.pushState({},b,d)},1E3)}},newDialogSocket:function(a){this.dialogSocket&&this.dialogSocket.destroy();this.dialogSocket=a},initSocket:function(a,b,d,e){e||=0;var k=new easyXDM.Socket({remote:a,swf:this.isIE()?this.buildUrl("js/easyxdm.swf"):"",props:{style:this.extend({margin:0,padding:0,background:"#fff",border:0,position:"absolute",left:0,top:0,overflow:"hidden",width:"100%",
height:"100%"},d),frameBorder:"0"},container:b,onMessage:function(g){var w;/weights:/.test(g)||console.info("[uLogin] ulogin.js received message: "+g);if(w=g.match(/(.*?)\((.*?)\)/)){var E=w[1];g=w[2]}if(w=g.match(/^(.*?):(.*?)$/)){var A=w[1];var C=w[2]}/^https?:\/\//.test(g)?location.href=g:/^\/auth.php\?/.test(g)?(g="https://"+uLogin.uLoginHost+g,uLogin.ids[e].altway?location.href=g:uLogin.openWithReceiver(g,e)):uLogin.inArray(g,uLogin.states)>-1?uLogin._changeState(e,g):A&&uLogin.inArray(A,uLogin.states)>
-1?uLogin._changeState(e,A,typeof C==="string"?C.split(","):[]):g=="closeme"?(uLogin.hideAll(),k.destroy()):/to_window:/.test(g)?(E=uLogin.buildUrl(g.replace(/to_window:\/?/,"",""),{set:encodeURIComponent("{window:1}")}),uLogin.loadWindow(E),/to_window:\/fill\.php/.test(g)&&uLogin._changeState(e,"fill")):/weights:/.test(g)?uLogin.setWeights(g.replace(/weights:\/?/,"","")):E?typeof r[E]!="undefined"&&(r[E].apply(r,g.split(",")),k.destroy(),uLogin.dialog&&uLogin.hideAll()):uLogin.ids[e]&&typeof r[uLogin.ids[e].callback]!=
"undefined"&&(uLogin._changeState(e,"receive"),r[uLogin.ids[e].callback](g),uLogin.dialog&&uLogin.hideAll())}});return k},getWidgetNumber:function(a){for(var b=0;b<this.ids.length;b++)if(a==this.ids[b].id)return b;return NaN},onMoveWindow:function(){this.moveWindow()},loadWindow:function(a,b){b===null&&(b=!1);var d=this.ids[b]?this.ids[b].opacity:75;try{y.body.removeChild(this.lightbox)}catch(k){}try{y.body.removeChild(this.dialog)}catch(k){}var e=y.createElement("div");this.resetStyle(e,{position:"fixed",
zIndex:9997,width:"100%",height:"100%",background:"#"+(this.ids[b]?this.ids[b].color:"fff"),display:"none"});this.setOpacity(e,d);this.lightbox=e;e=y.createElement("div");e.id=this.genID();e.className="ulogin-popup";this.resetStyle(e,{position:"absolute",zIndex:9998,left:Math.floor(this.scrollLeft()+(this.clientWidth()-this.dialogWidth())/2),top:Math.floor(this.scrollTop()+(this.clientHeight()-this.dialogHeight())/2),width:this.dialogWidth(),height:this.dialogHeight(),overflow:"visible",display:"none",
border:this.ids[b]&&this.ids[b].theme==="flat"?"5px solid #666":"10px solid #666",borderRadius:this.ids[b]&&this.ids[b].theme==="flat"?0:"8px",boxShadow:"0 2px 3px 0 rgba(0,0,0,.2),0 3px 2px -2px rgba(0,0,0,.22),0 1px 6px 0 rgba(0,0,0,.12)"});this.dialog=e;e=y.createElement("div");e.className="ulogin-popup-close";this.resetStyle(e,{position:"absolute",width:30,height:30,zIndex:9999,background:"url("+this.buildUrl("img/x.png")+")",cursor:"pointer",display:"none",left:"initial",top:"-15px",right:"-15px"});
this.close=e;y.body.appendChild(this.lightbox);y.body.appendChild(this.dialog);this.dialog.appendChild(this.close);this.add(this.lightbox,"click",function(){uLogin.hideAll()});this.add(this.close,"click",function(){uLogin.hideAll()});this.add(this.close,"mouseover",function(k){k.style.background="url("+uLogin.buildUrl("img/x_.png")+")"});this.add(this.close,"mouseout",function(k){k.style.background="url("+uLogin.buildUrl("img/x.png")+")"});this.add(r,"scroll",function(){uLogin.onMoveWindow()});this.add(r,
"resize",function(){uLogin.onMoveWindow()});this.newDialogSocket(this.initSocket(a,this.dialog.getAttribute("id"),{},b));uLogin.show(uLogin.close);uLogin.show(uLogin.lightbox);uLogin.show(uLogin.dialog);uLogin.onMoveWindow()},hideAll:function(){this.hide(this.lightbox);this.hide(this.dialog);this.hide(this.close);for(var a=0;a<this.ids.length;a++)this.ids[a].showed=!1,this.hide(this.ids[a].hiddenW),this.hide(this.ids[a].hiddenA)},moveWindow:function(){if(!this.dialog||!this.dialog.firstChild)return!1;
var a=this.dialogWidth(),b=this.dialogHeight();a=(Math.floor(this.scrollLeft()+(this.clientWidth()-a)/2)-Number(this.dialog.style.left.slice(0,-2)))/10;b=(Math.floor(this.scrollTop()+(this.clientHeight()-b)/2)-Number(this.dialog.style.top.slice(0,-2)))/10;for(var d=0;d<10;d++)this.dialog.style.left=a+Number(this.dialog.style.left.slice(0,-2))+"px",this.dialog.style.top=b+Number(this.dialog.style.top.slice(0,-2))+"px"},resetStyle:function(a,b){!b&&(b={});b=this.extend({margin:0,padding:0,outline:"none",
border:"none",borderRadius:0,cursor:"default",float:"none",position:"relative",display:"inherit",width:"auto",height:"auto",left:0,top:0,boxSizing:"content-box"},b);var d=["width","height","left","top"],e=["float"],k;for(k in b){this.inArray(k,d)>-1&&typeof b[k]==="number"&&(b[k]+="px");try{this.inArray(k,e)>-1&&a.style.setProperty(k,b[k])}catch(g){}try{a.style[k]=b[k]}catch(g){}}},getIconPosition:function(a,b){return a?"0 -"+(18+17*b)+"px":"0 -"+(36+34*b)+"px"},setOpacity:function(a,b){a.style.filter=
b?"alpha(opacity="+b+") progid:DXImageTransform.Microsoft.AlphaImageLoader(src=transparent.png, sizingMethod='crop')":"";a.style.opacity=b?parseFloat(b)/100:""},initDrop:function(a){if(!this.ids[a].mobile&&this.ids[a].hidden!=""){var b=this.get(this.ids[a].id),d=this.genID();var e=this.ids[a].hidden.split(",").length*23-2>310?310:this.ids[a].hidden.split(",").length*23-2;var k=y.createElement("div");k.className="ulogin-dropdown";k.id=d;this.resetStyle(k,{position:"absolute",zIndex:9999,width:128,
height:e,border:this.ids[a].theme==="flat"?"3px solid #666":"5px solid #666",borderRadius:this.ids[a].theme==="flat"?0:"4px",boxShadow:"0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)",display:"none"});this.ids[a].hiddenW=k;this.ids[a].dropdown_container==="body"?y.body.appendChild(this.ids[a].hiddenW):b.appendChild(this.ids[a].hiddenW);k=this.buildUrl("/version/3.0/html/drop.html",{id:a,redirect_uri:this.ids[a].redirect_uri,callback:this.ids[a].callback,providers:this.ids[a].hidden,
fields:this.ids[a].fields,force_fields:this.ids[a].force_fields,popup_css:this.ids[a].popup_css,optional:this.ids[a].optional,othprov:this.ids[a].providers,protocol:this.protocol,host:this.host,lang:this.ids[a].lang,verify:this.ids[a].verify,sort:this.ids[a].sort,altway:this.ids[a].altway?1:null,m:this.ids[a].m?1:0,icons_32:this.ids[a].icons_32,icons_16:this.ids[a].icons_16,theme:this.ids[a].theme,client:this.ids[a].client,page:this.page,version:this.version});this.initSocket(k,d,{position:"relative",
width:"128px",height:e+"px"},a);k=y.createElement("div");this.resetStyle(k,{position:"absolute",background:"#000",left:"initial",right:this.ids[a].theme==="flat"?"-3px":"-5px",top:"100%",width:41,height:13,border:this.ids[a].theme==="flat"?"3px solid #666":"5px solid #666",textAlign:"center"});e=y.createElement("a");e.href=this.buildUrl("");e.target="_blank";this.resetStyle(e,{width:41,height:13,background:"url("+this.buildUrl("img/text.png")+") no-repeat"});k.appendChild(e);this.ids[a].hiddenW.appendChild(k);
k=y.createElement("div");this.resetStyle(k,{width:0,height:0,position:"absolute",zIndex:9999,display:"none",border:"5px solid transparent",borderBottomColor:"#666"});this.ids[a].hiddenA=k;b.appendChild(this.ids[a].hiddenA);this.ids[a].showed=!1;this.add(y.body,"click",function(g,w){w.target||(w.target=w.srcElement);for(g=0;g<uLogin.ids.length;g++)w.target!=uLogin.ids[g].drop&&(uLogin.hide(uLogin.ids[g].hiddenW),uLogin.hide(uLogin.ids[g].hiddenA))});this.ids[a].hiddenW&&this.ids[a].hiddenA&&(this.add(this.ids[a].hiddenW,
"mouseout",function(){uLogin.dropdownDelayed(a,0)}),this.add(this.ids[a].hiddenA,"mouseout",function(){uLogin.dropdownDelayed(a,0)}),this.add(this.ids[a].hiddenW,"mouseover",function(){uLogin.clearDropTimer(a)}),this.add(this.ids[a].hiddenA,"mouseover",function(){uLogin.clearDropTimer(a)}))}},showDrop:function(a,b){if(this.ids[a].hiddenW||this.ids[a].hiddenA)if(this.ids[a].showed||b==0)this.hide(this.ids[a].hiddenW),this.hide(this.ids[a].hiddenA),this.ids[a].showed=!1;else{this.show(this.ids[a].hiddenA);
this.show(this.ids[a].hiddenW);this.ids[a].showed=!0;var d=this.ids[a].drop;if(this.ids[a].dropdown_container==="body"){var e=this.getOffset(d);var k=e.left;e=e.top;this.ids[a].hiddenW.style.left=k-(b==1?100:106)+"px";this.ids[a].hiddenW.style.top=e+(b==1?21:37)+"px";this.ids[a].hiddenA.style.left=k+(b==1?4:12)+"px";this.ids[a].hiddenA.style.top=e+(b==1?17:33)+"px"}k=d.offsetLeft;e=d.offsetTop;k-=d.scrollLeft;e-=d.scrollTop;this.ids[a].dropdown_container!=="body"&&(this.ids[a].hiddenW.style.left=
k-(b==1?100:106)+"px",this.ids[a].hiddenW.style.top=e+(b==1?21:37)+"px");this.ids[a].hiddenA.style.left=k+(b==1?4:12)+"px";this.ids[a].hiddenA.style.top=e+(b==1?12:28)+"px"}},clearDropTimer:function(a){this.ids[a].dropTimer&&r.clearTimeout(this.ids[a].dropTimer)},dropdown:function(a,b){this.ids[a].mobile||(this.clearDropTimer(a),this.showDrop(a,b))},dropdownDelayed:function(a,b){this.clearDropTimer(a);this.ids[a].dropTimer=K(function(){uLogin.showDrop(a,b)},600)},initButtons:function(a){var b=this.get(this.ids[a].id);
this.ids[a].mobile&&this.add(this.get(this.ids[a].id),"click",function(d,e){e.preventDefault?e.preventDefault():e.returnValue=!1;d=uLogin.buildUrl("version/3.0/html/mobile.html",{id:uLogin.ids[a].id,redirect_uri:uLogin.ids[a].redirect_uri,callback:uLogin.ids[a].callback,fields:uLogin.ids[a].fields,force_fields:uLogin.ids[a].force_fields,popup_css:uLogin.ids[a].popup_css,optional:uLogin.ids[a].optional,protocol:uLogin.ids[a].protocol,host:uLogin.host,lang:uLogin.ids[a].lang,verify:uLogin.ids[a].verify,
providers:uLogin.ids[a].providers,hidden:uLogin.ids[a].hidden,icons_32:uLogin.ids[a].icons_32,altway:uLogin.ids[a].altway?1:null,page:uLogin.page,m:uLogin.ids[a].m?1:0,icons_16:uLogin.ids[a].icons_16,theme:uLogin.ids[a].theme,client:uLogin.ids[a].client,version:uLogin.version});uLogin.ids[a].altway?r.top?r.top.location.href=d:location.href=d:uLogin.openWithReceiver(d,a);return!1});this.ids[a].type==="window"?this._proceedChildren(b,this._(this._initButton),a):(this.ids[a].providers="",this._proceedChildren(b,
this._(this._initButton),a),this.ids[a].providers=this.ids[a].providers.slice(0,this.ids[a].providers.length-1));this._changeState(a,this.states[0])},_:function(a){return function(){a.apply(uLogin,arguments)}},_proceedChildren:function(a,b,d){a=a.childNodes;var e,k;for(k=0;k<a.length;k++){var g=a[k];g.getAttribute&&(b(g,d),(e=g.getAttribute("data-uloginbutton")||g.getAttribute("x-ulogin-button"))&&this.inArray(e,this.providerCodes)>-1&&!(new RegExp(e+"(,|$)","i")).test(this.ids[d].providers)&&(this.ids[d].providers+=
e+","));this._proceedChildren(g,b,d)}},_initButton:function(a,b){var d=a.getAttribute("data-uloginbutton")||a.getAttribute("x-ulogin-button");if(d)if(this.inArray(d,this.providerCodes)>-1)this.add(a,"mouseover",function(g){if(/disabled/.test(g.className))return!1;uLogin.setOpacity(g,parseFloat(uLogin.ids[b].opacity));if(+new Date<+new Date("2017/04/02 03:00:00")&&uLogin.ids[b].hovered_sprite&&!g.getAttribute("data-original-background")){var w=g.offsetHeight*uLogin.randFromTo(0,24),E=uLogin.ids[b].lang===
"ru"?"1 \u0430\u043f\u0440\u0435\u043b\u044f - \u0434\u0435\u043d\u044c \u0441\u043c\u0435\u0445\u0430! \u0423\u043b\u044b\u0431\u0430\u0439\u0442\u0435\u0441\u044c )":"April Fools' Day is here!";g.setAttribute("data-original-background",g.style.background);g.style.background="url("+uLogin.ids[b].hovered_sprite+") 0px -"+w+"px no-repeat";g.setAttribute("data-original-title",g.getAttribute("title"));g.setAttribute("title",E)}}),this.add(a,"mouseout",function(g){if(/disabled/.test(g.className))return!1;
uLogin.setOpacity(g);g.getAttribute("data-original-background")&&(g.style.background=g.getAttribute("data-original-background"),g.removeAttribute("data-original-background"));g.getAttribute("data-original-title")&&(g.setAttribute("title",g.getAttribute("data-original-title")),g.removeAttribute("data-original-title"))}),this.ids[b].mobile||this.add(a,"click",function(g){if(/disabled/.test(g.className))return!1;var w=g.getAttribute("data-uloginbutton")||g.getAttribute("x-ulogin-button");if(g.getAttribute("data-disabled-click"))return!1;
g.setAttribute("data-disabled-click","1");setTimeout(function(){g.setAttribute("data-disabled-click","")},1E3);uLogin.startAuth(w,"",b)});else if(d==="window"&&(this.ids[b].mobile||this.add(a,this.ids[b].event,function(g,w){w.preventDefault?w.preventDefault():w.returnValue=!1;if(/disabled/.test(g.className))return!1;g=uLogin.buildUrl(uLogin.ids[b].mobile?"version/3.0/html/mobile.html":"version/3.0/html/window.html",{id:b,redirect_uri:uLogin.ids[b].redirect_uri,callback:uLogin.ids[b].callback,fields:uLogin.ids[b].fields,
force_fields:uLogin.ids[b].force_fields,popup_css:uLogin.ids[b].popup_css,optional:uLogin.ids[b].optional,protocol:uLogin.protocol,host:uLogin.host,lang:uLogin.ids[b].lang,verify:uLogin.ids[b].verify,sort:uLogin.ids[b].sort,othprov:uLogin.ids[b].hidden,providers:uLogin.ids[b].providers,altway:uLogin.ids[b].altway?1:null,m:uLogin.ids[b].m?1:0,icons_32:uLogin.ids[b].icons_32,icons_16:uLogin.ids[b].icons_16,theme:uLogin.ids[b].theme,client:uLogin.ids[b].client,page:uLogin.page,version:uLogin.version});
uLogin.loadWindow(g,b);return!1}),a.getAttribute("data-ulogin-default"))){var e=this.buildUrl("img/"+(this.ids[b].lang=="ru"?"":this.ids[b].lang+"/")+"button.png?version=img.3.0.2"),k=this.buildUrl("img/"+(this.ids[b].lang=="ru"?"":this.ids[b].lang+"/")+"button_.png?version=img.3.0.2");a.src=e;this.resetStyle(a,{cursor:"pointer"});this.add(a,"mouseover",function(g){if(/disabled/.test(g.parentNode.className))return!1;g.src!=k&&(g.src=k)});this.add(a,"mouseout",function(g){if(/disabled/.test(g.parentNode.className))return!1;
g.src!=e&&(g.src=e)})}},randFromTo:function(a,b){return Math.floor(Math.random()*b)+a},sendWeight:function(a){this.initSocket(this.buildUrl("version/3.0/html/weight_set.html",{provider:a,r:parseInt(Math.random()*1E5)}),this.getRC(),{background:"transparent"})},setWeights:function(a){this.supportStorage&&(localStorage.providers_weight=a)},getWeights:function(){try{return JSON.parse(localStorage.providers_weight)}catch(a){return{}}},relProviders:function(a,b,d){a=a.split(",");b=b.split(",");if(this.supportStorage){var e=
this.getWeights(),k;for(k in e){e=this.inArray(k,a);var g=this.inArray(k,b);e!==-1?(a.splice(e,1),a.splice(0,0,k)):g!==-1&&(a.splice(0,0,k),b.splice(g,1),b.splice(0,0,a[a.length-1]),a.splice(a.length-1,1))}}return d===1?a:b},startAuth:function(a,b,d){var e={name:a,window:1,lang:this.ids[d].lang,fields:this.ids[d].fields,force_fields:this.ids[d].force_fields,popup_css:this.ids[d].popup_css,host:this.host,optional:this.ids[d].optional,redirect_uri:this.ids[d].redirect_uri||location.href,verify:this.ids[d].verify,
callback:this.ids[d].callback,screen:screen.width+"x"+screen.height,url:b,providers:this.ids[d].providers,hidden:this.ids[d].hidden,m:this.ids[d].m?1:0,page:this.page,icons_32:this.ids[d].icons_32,icons_16:this.ids[d].icons_16,theme:this.ids[d].theme,client:this.ids[d].client,version:this.version};this.ids[d].altway&&(e.altway=1);a=b||a!="webmoney"&&a!="livejournal"&&a!="openid"?this.buildUrl("auth.php",e):this.buildUrl("url.php",e);this._changeState(d,this.states[1]);this.ids[d].altway?r.top?r.top.location.href=
a:location.href=a:this.openWithReceiver(a,d)},openWithReceiver:function(a,b){!b&&(b=0);var d=660,e=420;/name=vkontakte/.test(a)?e=380:/name=facebook/.test(a)?(d=560,e=350):/name=google/.test(a)?(d=800,e=630):/name=yandex/.test(a)?(d=990,e=530):/name=lastfm/.test(a)&&(d=1368,e=894);this.openFromSocket?this.authSocket.postMessage("window.open::"+a+"::"+d+"::"+e+"::"+(screen.width-d)/2+"::"+(screen.height-e)/2):(this.initSocket(this.buildUrl("/version/3.0/html/buttons_receiver.html",{four:encodeURIComponent(a),
r:parseInt(Math.random()*1E5)}),this.getRC(),{background:"transparent"},b),uLogin.getRC().getElementsByTagName("iframe"),window.open(a,"uLogin_window","width="+d+",height="+e+",left="+(screen.width-d)/2+",top="+(screen.height-e)/2))},checkWindow:function(a,b){},checkCurrentWidgets:function(){for(var a=0;this.ids[a];)this.checkWidget(this.ids[a++].id)},checkWidget:function(a,b){var d=this.get(a);if(d)if(this.inited(a)){a=this.getWidgetNumber(a);b=this.ids[a].type;if((b==="small"||b==="panel")&&!d.childNodes.length)return d=
this.ids[a].id,uLogin.ids[a].id=!1,uLogin.initWidget(d),!0;d.getAttribute("data-ulogin-inited")||(d=this.ids[a].id,uLogin.ids[a].id=!1,uLogin.initWidget(d))}else this.addWidget(this.get(a),b);else this.ids[this.getWidgetNumber(a)].id=!1},buildUrl:function(a,b,d){b||={};d||=!1;a=a?"https://"+this.uLoginHost+"/"+a:"";var e="",k;for(k in b){var g=b[k];g!==null&&(!d&&(/\?/.test(g)||/\//.test(g)||/:/.test(g))&&(g=""),e+=k+"="+g+"&")}e.length>0&&(e=e.substring(0,e.length-1),a=a+(/\?/.test(a)?"&":"?")+e);
return a},getWidget:function(a,b){if(this.inited(b))return!1;if(this.widgetSettings[a])return this.setProp(b,uLogin.ids.length,this.widgetSettings[a]),!1;if(this.waitGetWidget[a]&&this.inArray(b,this.waitGetWidget[a])!==-1)return!1;this.waitGetWidget[a]||(this.waitGetWidget[a]=[]);this.waitGetWidget[a].push(b);if(this.widgetSettings[a])this.setProp(b,this.ids.length,this.widgetSettings[a]);else{b=this.getRC();var d=y.createElement("script");d.async=!0;d.src=this.buildUrl("getwidget",{widgetid:a});
b.appendChild(d)}},forElements:function(a,b){if(a&&a.length)for(var d in a)b(a[d])},setWidget:function(a,b,d){!d&&b&&(d=b);if(a==="not_found")return this.forElements(this.waitGetWidget[a],function(e){if(typeof e!=="string")return!1;y.getElementById(e).setAttribute("data-uloginid","")}),!1;d&&!uLogin.widgetSettings[a]&&typeof d.display!=="undefined"&&(this.forElements(this.waitGetWidget[a],function(e){if(typeof e!=="string")return!1;var k=y.getElementById(e);if(!k)return console.error('uLogin ERROR: not found element with id "'+
e+'"'),!1;k=uLogin.parse(k.getAttribute("data-ulogin"));for(var g in k)d[g]=k[g];uLogin.setProp(e,uLogin.ids.length,d)}),this.widgetSettings[a]=d)},customInit:function(){for(var a=0;a<arguments.length;a++)if(typeof arguments[a]==="string"){var b=!1;if(!uLogin.get(arguments[a])||!arguments[a])return console.error('uLogin ERROR (customInit): Element with ID="'+arguments[a]+'" not found'),!1;arguments.length>1&&typeof arguments[arguments.length-1]==="object"&&(b=arguments[arguments.length-1]);uLogin.checkWidget(arguments[a],
b)}},getOffsetSum:function(a){for(var b=0,d=0;a;)b+=parseFloat(a.offsetTop),d+=parseFloat(a.offsetLeft),a=a.offsetParent;return{top:Math.round(b),left:Math.round(d)}},getOffsetRect:function(a){a=a.getBoundingClientRect();var b=document.body,d=document.documentElement;return{top:Math.round(a.top+(window.pageYOffset||d.scrollTop||b.scrollTop)-(d.clientTop||b.clientTop||0)),left:Math.round(a.left+(window.pageXOffset||d.scrollLeft||b.scrollLeft)-(d.clientLeft||b.clientLeft||0))}},getOffset:function(a){return a.getBoundingClientRect?
this.getOffsetRect(a):this.getOffsetSum(a)},checkAsyncWidgets:function(){var a=this.get("ulogin")||this.get("uLogin");a&&a.id&&this.addWidget(a)},setStateListener:function(a,b,d){this.listeners[a]||(this.listeners[a]={});this.listeners[a][b]||(this.listeners[a][b]=[]);return this.listeners[a][b].push(d)-1},removeStateListener:function(a,b,d){return this.listeners[a]&&this.listeners[a][d]?this.listeners[a][d].splice(b,1):!1},_changeState:function(a,b,d){try{this.ids[a].state=b;for(var e=0;this.listeners[this.ids[a].id][b][e];)this.listeners[this.ids[a].id][b][e++].apply(r,
typeof d==="object"?d:[])}catch(k){}},extend:function(a,b){for(var d in b)a[d]=b[d];return a},arrayIntersectKey:function(a,b){var d=[],e;for(e in a)e in b&&d.push(e);return d}},uLogin.inArray(uLogin.lang,uLogin.langs)==-1&&(uLogin.lang=uLogin.langs[0]),uLogin.init(typeof uLogin_query!="undefined"?uLogin_query:""));r.receiver=function(a,b,d){uLogin._changeState(0,"receive",[a]);!d&&b&&(d=b);r[d](a)};r.redirect=function(a,b){var d=y.createElement("form");d.action=b;d.method="post";d.target="_top";d.style.display=
"none";b=y.createElement("input");b.type="hidden";b.name="token";b.value=a;d.appendChild(b);y.body.appendChild(d);d.submit()}})(window,document,navigator,setTimeout);
